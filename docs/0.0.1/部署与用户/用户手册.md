# JustFit 用户手册

## 0. 文档信息

| 项目 | 内容 |
|------|------|
| 文档名称 | 用户手册 |
| 版本 | v1.0 |
| 日期 | 2026-02-07 |
| 项目版本 | v0.0.1 Beta |

## 1. 产品介绍

### 1.1 产品概述

JustFit 是一款面向多云/虚拟化平台的资源优化工具，通过数据采集、智能分析，帮助用户：

- 识别僵尸虚拟机，回收闲置资源
- 评估资源配置合理性，优化成本
- 发现潮汐性工作负载，制定启停策略
- 评估平台健康度，发现潜在风险

### 1.2 支持平台

**v0.0.1 Beta 支持：**
- VMware vCenter 6.7+

**后续版本计划：**
- H3C UIS
- 更多虚拟化平台

### 1.3 系统要求

| 组件 | 要求 |
|------|------|
| 操作系统 | Windows 10+, 麒麟 V10, 统信 UOS 20, macOS 12+ |
| 处理器 | x86_64 / ARM64 / LoongArch |
| 内存 | 4 GB 以上 |
| 磁盘 | 500 MB 可用空间 |

## 2. 快速开始

### 2.1 安装启动

1. 下载对应平台的安装包
2. 运行安装程序
3. 启动 JustFit

### 2.2 首次使用

```
┌─────────────────────────────────────┐
│           JustFit 首页              │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────┐  ┌─────────┐          │
│  │健康评分 │  │僵尸 VM │          │
│  │   --    │  │   --    │          │
│  └─────────┘  └─────────┘          │
│                                     │
│  提示：请先添加平台连接              │
│                                     │
│         [添加连接] 按钮              │
│                                     │
└─────────────────────────────────────┘
```

## 3. 连接管理

### 3.1 添加 vCenter 连接

**步骤：**

1. 点击左侧菜单"连接与采集"
2. 点击"新增连接"按钮
3. 填写连接信息：
   - **连接名称**：自定义，如"生产环境 vCenter"
   - **服务器地址**：vCenter 服务器地址，如 `https://vcenter.example.com`
   - **端口**：默认 443
   - **用户名**：vCenter 管理员账号
   - **密码**：对应密码
4. 点击"测试连接"验证
5. 测试成功后点击"保存"

**注意事项：**
- 确保 vCenter 账号具有只读权限
- 确保网络可访问 vCenter 服务器
- 如使用自签名证书，可取消"验证证书"选项

### 3.2 管理连接

在连接列表中可以：
- 查看连接状态（已连接/未连接/错误）
- 查看最后采集时间
- 编辑连接配置
- 删除连接
- 测试连接可用性

## 4. 数据采集

### 4.1 创建采集任务

**步骤：**

1. 在连接列表中选择目标连接
2. 点击"采集数据"按钮
3. 配置采集参数：
   - **采集名称**：自定义任务名称
   - **采集范围**：选择集群/主机/虚拟机
   - **时间范围**：选择采集的数据时间范围
   - **采样粒度**：默认 5 分钟
4. 点击"开始采集"

### 4.2 查看采集进度

在"任务中心"可以查看：
- 任务状态（等待/运行/成功/失败）
- 当前进度
- 已用时间
- 实时日志

### 4.3 采集参数说明

| 参数 | 说明 | 建议 |
|------|------|------|
| 采样粒度 | 指标采集间隔 | 5 分钟（默认） |
| 时间范围 | 历史数据采集范围 | 首次建议 30 天 |
| 并发数 | 同时采集的任务数 | 3 个（默认） |

## 5. 分析功能

### 5.1 僵尸 VM 检测

**功能说明：** 识别长期低负载的虚拟机

**使用步骤：**

1. 点击左侧菜单"分析结果" → "僵尸 VM"
2. 点击"运行分析"
3. 查看分析结果

**结果解读：**

| 字段 | 说明 |
|------|------|
| VM 名称 | 虚拟机名称 |
| 置信度 | 判定结果的置信程度（0-1） |
| 节省估算 | 可节省的资源配置 |
| 建议动作 | 关机/迁移/保留 |

**详情查看：**
- 点击 VM 名称查看详细信息
- 查看指标趋势图
- 查看判定依据

### 5.2 Right Size 分析

**功能说明：** 评估虚拟机资源配置是否合理

**使用步骤：**

1. 点击左侧菜单"分析结果" → "Right Size"
2. 点击"运行分析"
3. 查看分析结果

**结果解读：**

| 配置 | 说明 |
|------|------|
| 当前配置 | 虚拟机当前资源配置 |
| 建议配置 | 基于使用率推荐的配置 |
| 调整类型 | 扩容/缩容/合理 |
| 节省比例 | 可节省的资源百分比 |

**风险评估：**
- **低风险**：使用率稳定，调整安全
- **中风险**：有一定波动，建议谨慎
- **高风险**：波动大或有峰值，不建议调整

### 5.3 潮汐检测

**功能说明：** 识别具有周期性特征的负载

**使用步骤：**

1. 点击左侧菜单"分析结果" → "潮汐检测"
2. 点击"运行分析"
3. 查看分析结果

**结果解读：**

| 字段 | 说明 |
|------|------|
| 周期类型 | 日周期/周周期 |
| 稳定性评分 | 周期规律的稳定程度 |
| 峰值时段 | 负载较高的时段 |
| 建议关机 | 建议关机的时段 |

**节省估算：**
- 每天可节省的小时数
- 预计节省的能源/成本

### 5.4 平台健康

**功能说明：** 评估集群和主机的整体健康状况

**使用步骤：**

1. 点击左侧菜单"分析结果" → "平台健康"
2. 选择集群或主机视图
3. 点击"运行分析"

**评分维度：**

| 维度 | 说明 |
|------|------|
| 资源均衡 | 各主机资源分配均衡度 |
| 超配风险 | CPU/内存超分配风险 |
| 热点集中 | 是否存在负载集中的主机 |

**风险识别：**
- 高负载主机
- 资源紧张的主机
- 需要迁移的虚拟机

## 6. 报告管理

### 6.1 生成报告

**步骤：**

1. 点击左侧菜单"报告与导出"
2. 点击"生成报告"
3. 配置报告参数：
   - **报告类型**：综合/僵尸 VM/Right Size/潮汐/健康
   - **报告范围**：选择分析对象
   - **时间范围**：选择数据范围
4. 点击"生成"

### 6.2 导出报告

**支持格式：**
- **PDF**：适合打印和归档
- **HTML**：适合在线查看
- **JSON**：适合二次分析

**导出步骤：**
1. 在报告列表中选择报告
2. 点击"导出"
3. 选择导出格式
4. 选择保存位置
5. 确认导出

### 6.3 报告内容

**综合报告包含：**
- 执行摘要
- 平台概览
- 各类分析结果汇总
- 优化建议清单
- 关键指标图表

## 7. 任务中心

### 7.1 任务状态

| 状态 | 图标 | 说明 |
|------|------|------|
| 等待中 | ⏱️ | 任务排队中 |
| 运行中 | 🔄 | 任务正在执行 |
| 成功 | ✅ | 任务完成 |
| 失败 | ❌ | 任务执行失败 |
| 已停止 | ⏹️ | 任务被手动停止 |

### 7.2 任务操作

- **查看详情**：点击任务查看执行日志
- **停止任务**：停止运行中的任务
- **重试任务**：重新执行失败的任务
- **删除记录**：删除历史任务记录

## 8. 系统设置

### 8.1 数据保留策略

设置数据保留时间，超过时间的数据将被自动清理：

| 数据类型 | 默认保留期 |
|----------|-----------|
| 指标数据 | 90 天 |
| 任务日志 | 30 天 |
| 报告记录 | 永久 |

### 8.2 分析参数

可配置的分析参数：

| 参数 | 默认值 | 说明 |
|------|--------|------|
| 僵尸 VM 检测窗口 | 14 天 | 分析的时间范围 |
| 僵尸 VM CPU 阈值 | 5% | CPU 使用率上限 |
| Right Size 百分位 | 95 | 分析百分位数 |
| 潮汐检测最小峰谷差 | 40% | 最小峰谷差值 |

### 8.3 诊断工具

**导出诊断包：**
- 包含系统日志
- 包含配置信息
- 用于问题排查

**检查更新：**
- 检查是否有新版本
- 跳转到发布页下载

## 9. 常见问题

### Q1: 连接测试失败怎么办？

**A:** 请检查：
1. vCenter 服务器地址是否正确
2. 网络是否可达
3. 用户名密码是否正确
4. 防火墙是否允许连接
5. 如使用自签名证书，取消"验证证书"

### Q2: 采集任务失败怎么办？

**A:** 请检查：
1. 连接是否正常
2. vCenter API 是否可用
3. 采集范围是否过大
4. 查看任务日志获取错误详情

### Q3: 为什么没有检测到僵尸 VM？

**A:** 可能原因：
1. 数据采集时间不足（需要至少 14 天）
2. 阈值设置过严格
3. 所有虚拟机都有正常负载

### Q4: Right Size 建议是否安全？

**A:** 建议：
1. 低风险调整可直接执行
2. 中高风险建议需要评估
3. 建议先在非关键 VM 上测试
4. 保留原配置以便回滚

### Q5: 如何保护我的连接凭据？

**A:** JustFit：
1. 所有凭据使用 AES-256 加密存储
2. 日志不记录敏感信息
3. 建议使用只读账号
4. 定期更换密码

## 10. 最佳实践

### 10.1 采集建议

- 首次使用建议采集 30 天历史数据
- 定期采集（如每天）保持数据更新
- 根据需要调整采样粒度

### 10.2 分析建议

- 定期运行分析（如每周）
- 关注置信度高的结果
- 综合多个分析维度做决策

### 10.3 优化建议

- 优先处理高置信度僵尸 VM
- Right Size 建议分级实施
- 潮汐启停建议在测试环境验证
- 定期查看平台健康评分

## 11. 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl/Cmd + N | 新建连接 |
| Ctrl/Cmd + R | 刷新当前页面 |
| Ctrl/Cmd + , | 打开设置 |
| F5 | 刷新数据 |

## 12. 联系支持

如遇到问题或需要帮助：

- 邮箱：support@example.com
- 文档：https://docs.example.com
- Issue：https://github.com/your-org/justfit/issues

## 13. 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| v1.0 | 2026-02-07 | 初始版本 | - |

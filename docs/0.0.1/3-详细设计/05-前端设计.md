# JustFit å‰ç«¯è®¾è®¡æ–‡æ¡£

## 0. æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|------|------|
| æ–‡æ¡£åç§° | å‰ç«¯è®¾è®¡æ–‡æ¡£ |
| ç‰ˆæœ¬ | v1.0 |
| æ—¥æœŸ | 2026-02-07 |
| é¡¹ç›®ç‰ˆæœ¬ | v0.0.1 Beta |
| æŠ€æœ¯æ ˆ | Vue 3 + Vite + Element Plus |

## 1. æŠ€æœ¯æ¶æ„

### 1.1 æŠ€æœ¯é€‰å‹

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Vue | 3.4+ | æ¸è¿›å¼æ¡†æ¶ |
| Vite | 5.0+ | æ„å»ºå·¥å…· |
| TypeScript | 5.0+ | ç±»å‹ç³»ç»Ÿ |
| Element Plus | 2.5+ | UI ç»„ä»¶åº“ |
| Pinia | 2.1+ | çŠ¶æ€ç®¡ç† |
| Vue Router | 4.2+ | è·¯ç”±ç®¡ç† |
| ECharts | 5.5+ | å›¾è¡¨åº“ |
| Day.js | 1.11+ | æ—¥æœŸå¤„ç† |
| Wails Runtime | - | å‰åç«¯é€šä¿¡ |

### 1.2 ç›®å½•ç»“æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # API æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ connection.ts       # è¿æ¥ API
â”‚   â”‚   â”œâ”€â”€ task.ts             # ä»»åŠ¡ API
â”‚   â”‚   â”œâ”€â”€ analysis.ts         # åˆ†æ API
â”‚   â”‚   â”œâ”€â”€ report.ts           # æŠ¥å‘Š API
â”‚   â”‚   â”œâ”€â”€ system.ts           # ç³»ç»Ÿ API
â”‚   â”‚   â””â”€â”€ types.ts            # API ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ assets/                 # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.scss  # æ ·å¼å˜é‡
â”‚   â”‚   â”‚   â”œâ”€â”€ mixins.scss     # æ ·å¼æ··å…¥
â”‚   â”‚   â”‚   â””â”€â”€ global.scss     # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”œâ”€â”€ components/             # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AppShell.vue        # åº”ç”¨å¤–å£³
â”‚   â”‚   â”œâ”€â”€ StatCard.vue        # ç»Ÿè®¡å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ MetricChart.vue     # æŒ‡æ ‡å›¾è¡¨
â”‚   â”‚   â”œâ”€â”€ EmptyState.vue      # ç©ºçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ ErrorState.vue      # é”™è¯¯çŠ¶æ€
â”‚   â”‚   â””â”€â”€ LoadingSpinner.vue  # åŠ è½½çŠ¶æ€
â”‚   â”œâ”€â”€ composables/            # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useApi.ts           # API è°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ useTaskPoll.ts      # ä»»åŠ¡è½®è¯¢
â”‚   â”‚   â”œâ”€â”€ useChart.ts         # å›¾è¡¨é…ç½®
â”‚   â”‚   â””â”€â”€ useWebSocket.ts     # WebSocket
â”‚   â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ routes.ts
â”‚   â”œâ”€â”€ stores/                 # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ connection.ts       # è¿æ¥çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ task.ts             # ä»»åŠ¡çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ analysis.ts         # åˆ†æçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ report.ts           # æŠ¥å‘ŠçŠ¶æ€
â”‚   â”‚   â””â”€â”€ system.ts           # ç³»ç»ŸçŠ¶æ€
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ format.ts           # æ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ validate.ts         # éªŒè¯
â”‚   â”‚   â”œâ”€â”€ date.ts             # æ—¥æœŸå¤„ç†
â”‚   â”‚   â””â”€â”€ constants.ts        # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ views/                  # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Dashboard.vue       # é¦–é¡µæ€»è§ˆ
â”‚   â”‚   â”œâ”€â”€ connections/        # è¿æ¥ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue       # è¿æ¥åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ ConnectionForm.vue # è¿æ¥è¡¨å•
â”‚   â”‚   â”œâ”€â”€ analysis/           # åˆ†æç»“æœ
â”‚   â”‚   â”‚   â”œâ”€â”€ Zombie.vue      # åƒµå°¸ VM
â”‚   â”‚   â”‚   â”œâ”€â”€ RightSize.vue   # Right Size
â”‚   â”‚   â”‚   â”œâ”€â”€ Tidal.vue       # æ½®æ±æ£€æµ‹
â”‚   â”‚   â”‚   â””â”€â”€ Health.vue      # å¹³å°å¥åº·
â”‚   â”‚   â”œâ”€â”€ reports/            # æŠ¥å‘Šç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ index.vue
â”‚   â”‚   â”‚   â””â”€â”€ ReportDetail.vue
â”‚   â”‚   â”œâ”€â”€ tasks/              # ä»»åŠ¡ä¸­å¿ƒ
â”‚   â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”‚   â””â”€â”€ settings/           # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚       â””â”€â”€ index.vue
â”‚   â”œâ”€â”€ App.vue                 # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts                 # å…¥å£æ–‡ä»¶
â”œâ”€â”€ index.html                  # HTML æ¨¡æ¿
â”œâ”€â”€ vite.config.ts              # Vite é…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â””â”€â”€ package.json                # ä¾èµ–é…ç½®
```

## 2. è·¯ç”±è®¾è®¡

### 2.1 è·¯ç”±é…ç½®

```typescript
// router/routes.ts
import type { RouteRecordRaw } from 'vue-router'

const routes: RouteRecordRaw[] = [
  {
    path: '/',
    component: () => import('@/components/AppShell.vue'),
    children: [
      {
        path: '',
        name: 'Dashboard',
        component: () => import('@/views/Dashboard.vue'),
        meta: { title: 'é¦–é¡µæ€»è§ˆ', icon: 'dashboard' }
      },
      {
        path: 'connections',
        name: 'Connections',
        component: () => import('@/views/connections/index.vue'),
        meta: { title: 'è¿æ¥ä¸é‡‡é›†', icon: 'connection' }
      },
      {
        path: 'analysis',
        name: 'Analysis',
        redirect: '/analysis/zombie',
        meta: { title: 'åˆ†æç»“æœ', icon: 'analysis' },
        children: [
          {
            path: 'zombie',
            name: 'ZombieAnalysis',
            component: () => import('@/views/analysis/Zombie.vue'),
            meta: { title: 'åƒµå°¸ VM' }
          },
          {
            path: 'rightsize',
            name: 'RightSizeAnalysis',
            component: () => import('@/views/analysis/RightSize.vue'),
            meta: { title: 'Right Size' }
          },
          {
            path: 'tidal',
            name: 'TidalAnalysis',
            component: () => import('@/views/analysis/Tidal.vue'),
            meta: { title: 'æ½®æ±æ£€æµ‹' }
          },
          {
            path: 'health',
            name: 'HealthAnalysis',
            component: () => import('@/views/analysis/Health.vue'),
            meta: { title: 'å¹³å°å¥åº·' }
          }
        ]
      },
      {
        path: 'reports',
        name: 'Reports',
        component: () => import('@/views/reports/index.vue'),
        meta: { title: 'æŠ¥å‘Šä¸å¯¼å‡º', icon: 'document' }
      },
      {
        path: 'tasks',
        name: 'Tasks',
        component: () => import('@/views/tasks/index.vue'),
        meta: { title: 'ä»»åŠ¡ä¸­å¿ƒ', icon: 'task' }
      },
      {
        path: 'settings',
        name: 'Settings',
        component: () => import('@/views/settings/index.vue'),
        meta: { title: 'ç³»ç»Ÿè®¾ç½®', icon: 'setting' }
      }
    ]
  },
  {
    path: '/:pathMatch(.*)*',
    redirect: '/'
  }
]

export default routes
```

### 2.2 è·¯ç”±å…ƒä¿¡æ¯

```typescript
declare module 'vue-router' {
  interface RouteMeta {
    title?: string
    icon?: string
    requiresAuth?: boolean
    keepAlive?: boolean
  }
}
```

## 3. çŠ¶æ€ç®¡ç† (Pinia)

### 3.1 è¿æ¥çŠ¶æ€ Store

```typescript
// stores/connection.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import * as ConnectionAPI from '@/api/connection'
import type { ConnectionInfo, CreateConnectionRequest } from '@/api/types'

export const useConnectionStore = defineStore('connection', () => {
  // çŠ¶æ€
  const connections = ref<ConnectionInfo[]>([])
  const loading = ref(false)
  const error = ref<string | null>(null)

  // è®¡ç®—å±æ€§
  const connectedCount = computed(() =>
    connections.value.filter(c => c.status === 'connected').length
  )

  const connectionById = computed(() => (id: string) =>
    connections.value.find(c => c.id === id)
  )

  // æ“ä½œ
  async function fetchConnections() {
    loading.value = true
    error.value = null
    try {
      const res = await ConnectionAPI.ListConnections({})
      connections.value = res.connections
    } catch (e: any) {
      error.value = e.message
      throw e
    } finally {
      loading.value = false
    }
  }

  async function createConnection(data: CreateConnectionRequest) {
    loading.value = true
    error.value = null
    try {
      const res = await ConnectionAPI.CreateConnection(data)
      await fetchConnections() // åˆ·æ–°åˆ—è¡¨
      return res
    } catch (e: any) {
      error.value = e.message
      throw e
    } finally {
      loading.value = false
    }
  }

  async function testConnection(data: TestConnectionRequest) {
    try {
      return await ConnectionAPI.TestConnection(data)
    } catch (e: any) {
      error.value = e.message
      throw e
    }
  }

  async function deleteConnection(id: string) {
    try {
      await ConnectionAPI.DeleteConnection({ id })
      connections.value = connections.value.filter(c => c.id !== id)
    } catch (e: any) {
      error.value = e.message
      throw e
    }
  }

  return {
    connections,
    loading,
    error,
    connectedCount,
    connectionById,
    fetchConnections,
    createConnection,
    testConnection,
    deleteConnection
  }
})
```

### 3.2 ä»»åŠ¡çŠ¶æ€ Store

```typescript
// stores/task.ts
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import * as TaskAPI from '@/api/task'
import type { TaskInfo, TaskStats } from '@/api/types'

export const useTaskStore = defineStore('task', () => {
  const tasks = ref<TaskInfo[]>([])
  const loading = ref(false)
  const pollingTasks = ref<Set<string>>(new Set())

  const runningTasks = computed(() =>
    tasks.value.filter(t => t.status === 'running')
  )

  const failedTasks = computed(() =>
    tasks.value.filter(t => t.status === 'failed')
  )

  async function fetchTasks(filter?: Partial<TaskInfo>) {
    loading.value = true
    try {
      const res = await TaskAPI.ListTasks(filter || {})
      tasks.value = res.tasks
      return res
    } finally {
      loading.value = false
    }
  }

  async function getTask(taskId: string) {
    const res = await TaskAPI.GetTask({ task_id: taskId })
    // æ›´æ–°åˆ—è¡¨ä¸­çš„ä»»åŠ¡
    const index = tasks.value.findIndex(t => t.id === taskId)
    if (index !== -1) {
      tasks.value[index] = { ...tasks.value[index], ...res }
    }
    return res
  }

  function startPolling(taskId: string, callback?: (task: TaskInfo) => void) {
    pollingTasks.value.add(taskId)

    const interval = setInterval(async () => {
      const task = await getTask(taskId)
      callback?.(task)

      if (task.status !== 'running') {
        stopPolling(taskId)
        clearInterval(interval)
      }
    }, 2000) // æ¯ 2 ç§’è½®è¯¢

    return () => {
      stopPolling(taskId)
      clearInterval(interval)
    }
  }

  function stopPolling(taskId: string) {
    pollingTasks.value.delete(taskId)
  }

  async function stopTask(taskId: string) {
    await TaskAPI.StopTask({ task_id: taskId })
    return getTask(taskId)
  }

  async function retryTask(taskId: string) {
    await TaskAPI.RetryTask({ task_id: taskId })
    return getTask(taskId)
  }

  return {
    tasks,
    loading,
    pollingTasks,
    runningTasks,
    failedTasks,
    fetchTasks,
    getTask,
    startPolling,
    stopPolling,
    stopTask,
    retryTask
  }
})
```

## 4. API æœåŠ¡å±‚

### 4.1 ç±»å‹å®šä¹‰

```typescript
// api/types.ts

// é€šç”¨å“åº”ç»“æ„
export interface ApiResponse<T = any> {
  code: number
  message: string
  data: T
  trace_id: string
}

export interface PageResponse<T = any> extends ApiResponse<T> {
  page: number
  page_size: number
  total: number
}

// è¿æ¥ç›¸å…³
export interface ConnectionInfo {
  id: string
  name: string
  type: 'vcenter' | 'h3c'
  endpoint: string
  status: 'connected' | 'disconnected' | 'error'
  last_sync_at: number
  error_message?: string
  created_at: number
}

export interface CreateConnectionRequest {
  name: string
  type: string
  endpoint: string
  port?: number
  username: string
  password: string
  verify_tls?: boolean
}

export interface TestConnectionRequest {
  endpoint: string
  username: string
  password: string
  type?: string
}

export interface TestConnectionResponse {
  success: boolean
  message: string
  latency: number
  server_version?: string
}

// ä»»åŠ¡ç›¸å…³
export interface TaskInfo {
  id: string
  type: 'collect' | 'analyze' | 'report'
  name: string
  status: 'pending' | 'running' | 'success' | 'failed' | 'stopped'
  progress: number
  current_step?: string
  total_steps?: number
  started_at?: number
  ended_at?: number
  created_at: number
}

// èµ„æºç›¸å…³
export interface ClusterInfo {
  id: string
  name: string
  vendor: string
  total_cpu: number
  total_mem: number
  total_disk: number
  health_score?: number
  host_count: number
  vm_count: number
}

export interface VMInfo {
  id: string
  name: string
  host_id: string
  host_name: string
  vcpu: number
  vmem: number
  vdisk: number
  os_type?: string
  power_state: 'poweredOn' | 'poweredOff' | 'suspended'
}

// åˆ†æç›¸å…³
export interface AnalysisResult {
  id: string
  type: 'zombie' | 'rightsize' | 'tidal' | 'health'
  summary: string
  entries: AnalysisEntry[]
}

export interface AnalysisEntry {
  entity_type: 'cluster' | 'host' | 'vm'
  entity_id: string
  entity_name: string
  conclusion: string
  confidence: number
  recommendation: string
  evidence: Record<string, any>
  risk_level: 'low' | 'medium' | 'high'
}
```

### 4.2 API è°ƒç”¨å°è£…

```typescript
// api/connection.ts
import * as ConnectionService from '../../../wailsjs/go/backend/ConnectionService'
import type {
  CreateConnectionRequest,
  CreateConnectionResponse,
  ListConnectionsRequest,
  ListConnectionsResponse,
  TestConnectionRequest,
  TestConnectionResponse,
  DeleteConnectionRequest
} from './types'

// ç»Ÿä¸€é”™è¯¯å¤„ç†
async function handleApiCall<T>(fn: () => Promise<T>): Promise<T> {
  try {
    return await fn()
  } catch (error: any) {
    // è½¬æ¢ä¸ºç»Ÿä¸€é”™è¯¯æ ¼å¼
    throw new Error(error.message || 'è¯·æ±‚å¤±è´¥')
  }
}

export async function CreateConnection(req: CreateConnectionRequest): Promise<CreateConnectionResponse> {
  return handleApiCall(() => ConnectionService.CreateConnection(req))
}

export async function ListConnections(req: ListConnectionsRequest): Promise<ListConnectionsResponse> {
  return handleApiCall(() => ConnectionService.ListConnections(req))
}

export async function TestConnection(req: TestConnectionRequest): Promise<TestConnectionResponse> {
  return handleApiCall(() => ConnectionService.TestConnection(req))
}

export async function DeleteConnection(req: DeleteConnectionRequest): Promise<void> {
  return handleApiCall(() => ConnectionService.DeleteConnection(req))
}
```

## 5. é€šç”¨ç»„ä»¶è®¾è®¡

### 5.1 AppShell åº”ç”¨å¤–å£³

```vue
<!-- components/AppShell.vue -->
<template>
  <el-container class="app-shell">
    <el-aside width="240px" class="app-sidebar">
      <div class="sidebar-header">
        <h1>JustFit</h1>
        <span class="version">v0.0.1</span>
      </div>

      <el-menu
        :default-active="activeRoute"
        :router="true"
        class="sidebar-menu"
      >
        <el-menu-item
          v-for="route in mainRoutes"
          :key="route.name"
          :index="route.path"
        >
          <el-icon><component :is="route.meta.icon" /></el-icon>
          <span>{{ route.meta.title }}</span>
        </el-menu-item>

        <el-sub-menu
          v-for="group in subRoutes"
          :key="group.name"
          :index="group.path"
        >
          <template #title>
            <el-icon><component :is="group.meta.icon" /></el-icon>
            <span>{{ group.meta.title }}</span>
          </template>
          <el-menu-item
            v-for="child in group.children"
            :key="child.name"
            :index="child.path"
          >
            {{ child.meta.title }}
          </el-menu-item>
        </el-sub-menu>
      </el-menu>
    </el-aside>

    <el-container class="app-main">
      <el-header class="app-header">
        <div class="header-left">
          <el-breadcrumb separator="/">
            <el-breadcrumb-item>{{ currentRouteTitle }}</el-breadcrumb-item>
          </el-breadcrumb>
        </div>

        <div class="header-right">
          <!-- ä»»åŠ¡çŠ¶æ€æŒ‡ç¤ºå™¨ -->
          <task-status-indicator />

          <!-- é€šçŸ¥ -->
          <el-badge :value="unreadCount" :hidden="unreadCount === 0">
            <el-button :icon="Bell" circle />
          </el-badge>
        </div>
      </el-header>

      <el-main class="app-content">
        <router-view v-slot="{ Component }">
          <keep-alive>
            <component :is="Component" />
          </keep-alive>
        </router-view>
      </el-main>
    </el-container>
  </el-container>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { Dashboard, Connection, Analysis, Document, Task, Setting, Bell } from '@element-plus/icons-vue'

const route = useRoute()
const router = useRouter()

const activeRoute = computed(() => route.path)

const mainRoutes = computed(() => {
  return router.getRoutes().filter(r =>
    r.meta && r.meta.icon && !r.meta?.title?.includes('åˆ†æ')
  )
})

const subRoutes = computed(() => {
  return router.getRoutes().filter(r => r.path === '/analysis')
})

const currentRouteTitle = computed(() => route.meta?.title || 'é¦–é¡µ')

const unreadCount = ref(0) // ä»å‘Šè­¦ store è·å–
</script>
```

### 5.2 StatCard ç»Ÿè®¡å¡ç‰‡

```vue
<!-- components/StatCard.vue -->
<template>
  <el-card class="stat-card" :class="`stat-card--${type}`">
    <div class="stat-card__content">
      <div class="stat-card__icon">
        <el-icon :size="32">
          <component :is="icon" />
        </el-icon>
      </div>

      <div class="stat-card__data">
        <div class="stat-card__value">
          <animated-number :value="value" :format="formatValue" />
          <span v-if="unit" class="stat-card__unit">{{ unit }}</span>
        </div>

        <div class="stat-card__label">{{ label }}</div>

        <div v-if="trend !== undefined" class="stat-card__trend">
          <el-icon v-if="trend > 0" color="#67C23A"><ArrowUp /></el-icon>
          <el-icon v-else color="#F56C6C"><ArrowDown /></el-icon>
          <span>{{ Math.abs(trend) }}%</span>
        </div>
      </div>
    </div>

    <div v-if="loading" class="stat-card__loading">
      <el-skeleton :rows="1" animated />
    </div>
  </el-card>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import AnimatedNumber from './AnimatedNumber.vue'

interface Props {
  label: string
  value: number
  unit?: string
  icon?: any
  type?: 'primary' | 'success' | 'warning' | 'danger' | 'info'
  trend?: number
  loading?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  type: 'primary'
})

function formatValue(value: number): string {
  return value.toLocaleString()
}
</script>
```

### 5.3 MetricChart æŒ‡æ ‡å›¾è¡¨

```vue
<!-- components/MetricChart.vue -->
<template>
  <div ref="chartRef" class="metric-chart" :style="{ height: height }" />
</template>

<script setup lang="ts">
import { ref, onMounted, watch, onUnmounted } from 'vue'
import * as echarts from 'echarts'
import type { EChartsOption } from 'echarts'

interface Props {
  data: Array<{ timestamp: number; value: number }>
  title?: string
  unit?: string
  color?: string
  height?: string
}

const props = withDefaults(defineProps<Props>(), {
  height: '300px'
})

const chartRef = ref<HTMLDivElement>()
let chart: echarts.ECharts | null = null

function initChart() {
  if (!chartRef.value) return

  chart = echarts.init(chartRef.value)
  updateChart()
}

function updateChart() {
  if (!chart) return

  const option: EChartsOption = {
    title: {
      text: props.title,
      textStyle: { fontSize: 14 }
    },
    tooltip: {
      trigger: 'axis',
      formatter: (params: any) => {
        const point = params[0]
        const date = new Date(point.axisValue)
        return `${date.toLocaleString()}<br/>${props.title || ''}: ${point.value} ${props.unit || ''}`
      }
    },
    grid: {
      left: '3%',
      right: '4%',
      bottom: '3%',
      containLabel: true
    },
    xAxis: {
      type: 'time',
      boundaryGap: false
    },
    yAxis: {
      type: 'value',
      axisLabel: {
        formatter: `{value} ${props.unit || ''}`
      }
    },
    series: [{
      type: 'line',
      smooth: true,
      data: props.data.map(d => [d.timestamp, d.value]),
      areaStyle: {
        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
          offset: 0,
          color: props.color || 'rgba(64, 158, 255, 0.3)'
        }, {
          offset: 1,
          color: 'rgba(64, 158, 255, 0.05)'
        }])
      },
      lineStyle: { color: props.color || '#409EFF' }
    }]
  }

  chart.setOption(option)
}

onMounted(() => {
  initChart()
  window.addEventListener('resize', onResize)
})

onUnmounted(() => {
  chart?.dispose()
  window.removeEventListener('resize', onResize)
})

function onResize() {
  chart?.resize()
}

watch(() => props.data, updateChart, { deep: true })
</script>
```

## 6. é¡µé¢ç»„ä»¶

### 6.1 Dashboard é¦–é¡µ

```vue
<!-- views/Dashboard.vue -->
<template>
  <div class="dashboard">
    <!-- KPI å¡ç‰‡ -->
    <el-row :gutter="20" class="dashboard__kpi">
      <el-col :span="6">
        <stat-card
          label="å¥åº·è¯„åˆ†"
          :value="healthScore"
          :icon="TrendCharts"
          type="success"
        />
      </el-col>
      <el-col :span="6">
        <stat-card
          label="åƒµå°¸ VM"
          :value="zombieCount"
          :icon="Monitor"
          type="warning"
        />
      </el-col>
      <el-col :span="6">
        <stat-card
          label="å¯èŠ‚çœèµ„æº"
          :value="savings"
          unit="%"
          :icon="Coin"
          type="primary"
        />
      </el-col>
      <el-col :span="6">
        <stat-card
          label="å¼‚å¸¸ä»»åŠ¡"
          :value="failedTasks"
          :icon="Warning"
          type="danger"
        />
      </el-col>
    </el-row>

    <!-- è¿æ¥çŠ¶æ€ -->
    <el-card class="dashboard__connections">
      <template #header>
        <div class="card-header">
          <span>å¹³å°è¿æ¥</span>
          <el-button type="primary" link @click="goToConnections">ç®¡ç†</el-button>
        </div>
      </template>

      <el-table :data="connections" size="small">
        <el-table-column prop="name" label="åç§°" />
        <el-table-column prop="type" label="ç±»å‹">
          <template #default="{ row }">
            <el-tag>{{ row.type }}</el-tag>
          </template>
        </el-table-column>
        <el-table-column prop="status" label="çŠ¶æ€">
          <template #default="{ row }">
            <el-tag :type="statusType(row.status)">
              {{ statusText(row.status) }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column prop="last_sync_at" label="æœ€ååŒæ­¥">
          <template #default="{ row }">
            {{ formatDate(row.last_sync_at) }}
          </template>
        </el-table-column>
      </el-table>
    </el-card>

    <!-- é£é™©ä¸å»ºè®® -->
    <el-card class="dashboard__alerts">
      <template #header>
        <span>é£é™©ä¸å»ºè®®</span>
      </template>

      <el-table :data="alerts" size="small">
        <el-table-column prop="severity" label="çº§åˆ«" width="80">
          <template #default="{ row }">
            <el-tag :type="severityType(row.severity)">
              {{ row.severity }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column prop="title" label="æ ‡é¢˜" />
        <el-table-column prop="entity_name" label="å¯¹è±¡" />
        <el-table-column prop="created_at" label="æ—¶é—´">
          <template #default="{ row }">
            {{ formatRelative(row.created_at) }}
          </template>
        </el-table-column>
      </el-table>
    </el-card>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import StatCard from '@/components/StatCard.vue'
import { useConnectionStore } from '@/stores/connection'
import { useTaskStore } from '@/stores/task'
import { formatDate, formatRelative } from '@/utils/date'

const router = useRouter()
const connectionStore = useConnectionStore()
const taskStore = useTaskStore()

const healthScore = ref(85)
const zombieCount = ref(12)
const savings = ref(23)
const failedTasks = ref(0)
const alerts = ref([])

onMounted(async () => {
  await connectionStore.fetchConnections()
  await taskStore.fetchTasks()
  // åŠ è½½å…¶ä»–æ•°æ®...
})

function goToConnections() {
  router.push('/connections')
}
</script>
```

## 7. æ ·å¼è§„èŒƒ

### 7.1 æ ·å¼å˜é‡

```scss
// assets/styles/variables.scss

// é¢œè‰²
$primary-color: #409EFF;
$success-color: #67C23A;
$warning-color: #E6A23C;
$danger-color: #F56C6C;
$info-color: #909399;

// æ–‡å­—é¢œè‰²
$text-color-primary: #303133;
$text-color-regular: #606266;
$text-color-secondary: #909399;
$text-color-placeholder: #C0C4CC;

// è¾¹æ¡†é¢œè‰²
$border-color-base: #DCDFE6;
$border-color-light: #E4E7ED;
$border-color-lighter: #EBEEF5;
$border-color-extra-light: #F2F6FC;

// èƒŒæ™¯è‰²
$background-color-base: #F5F7FA;

// å°ºå¯¸
$spacing-xs: 4px;
$spacing-sm: 8px;
$spacing-md: 16px;
$spacing-lg: 24px;
$spacing-xl: 32px;

// åœ†è§’
$border-radius-base: 4px;
$border-radius-small: 2px;
$border-radius-large: 8px;

// å­—ä½“
$font-size-base: 14px;
$font-size-small: 12px;
$font-size-medium: 16px;
$font-size-large: 18px;
$font-size-extra-large: 20px;
```

### 7.2 å…¨å±€æ ·å¼

```scss
// assets/styles/global.scss

@import './variables.scss';

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body, #app {
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  font-size: $font-size-base;
  color: $text-color-primary;
}

.app-shell {
  height: 100%;

  .app-sidebar {
    background: #001529;
    color: rgba(255, 255, 255, 0.65);

    .sidebar-header {
      display: flex;
      align-items: center;
      padding: $spacing-lg;
      color: #fff;

      h1 {
        font-size: 20px;
        margin: 0;
      }

      .version {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.45);
        margin-left: $spacing-sm;
      }
    }

    .el-menu {
      background: #001529;
      border-right: none;

      .el-menu-item,
      .el-sub-menu__title {
        color: rgba(255, 255, 255, 0.65);

        &:hover,
        &.is-active {
          background: $primary-color !important;
          color: #fff;
        }
      }
    }
  }

  .app-main {
    background: $background-color-base;

    .app-header {
      background: #fff;
      border-bottom: 1px solid $border-color-base;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 $spacing-lg;
    }

    .app-content {
      padding: $spacing-lg;
      overflow-y: auto;
    }
  }
}

// å·¥å…·ç±»
.text-center { text-align: center; }
.text-right { text-align: right; }
.mt-10 { margin-top: 10px; }
.mb-10 { margin-bottom: 10px; }
.p-10 { padding: 10px; }
```

## 8. å½“å‰å®ç°çŠ¶æ€ä¸ä¼˜åŒ–å»ºè®®

### 8.1 å®ç°çŠ¶æ€è¯„ä¼°

**æ•´ä½“æ¡†æ¶è¯„åˆ†ï¼š8/10** â­â­â­â­

| æ¨¡å— | å®Œæˆåº¦ | çŠ¶æ€ | è¯´æ˜ |
|------|--------|------|------|
| è·¯ç”±ç³»ç»Ÿ | 100% | âœ… å®Œæˆ | è·¯ç”±é…ç½®å®Œå–„ï¼Œæ”¯æŒåµŒå¥—è·¯ç”±å’Œæ‡’åŠ è½½ |
| çŠ¶æ€ç®¡ç† | 90% | âœ… å®Œæˆ | Pinia çŠ¶æ€ç®¡ç†æ¶æ„æ¸…æ™°ï¼Œéœ€è¡¥å……é”™è¯¯å¤„ç† |
| API å°è£… | 70% | âš ï¸ è¿›è¡Œä¸­ | åŸºç¡€æ¥å£å·²å®Œæˆï¼Œç¼ºå°‘è™šæ‹ŸæœºæŒ‡æ ‡æŸ¥è¯¢æ¥å£ |
| é€šç”¨ç»„ä»¶ | 50% | âš ï¸ è¿›è¡Œä¸­ | AppShell å®Œæˆï¼Œç¼ºå°‘å›¾è¡¨ç»„ä»¶å’ŒåŠ è½½çŠ¶æ€ç»„ä»¶ |
| é¡µé¢å®ç° | 75% | âš ï¸ è¿›è¡Œä¸­ | ä¸»è¦é¡µé¢æ¡†æ¶å®Œæˆï¼Œéœ€ä¼˜åŒ–ç»†èŠ‚ |
| ç±»å‹å®šä¹‰ | 80% | âš ï¸ è¿›è¡Œä¸­ | åŸºç¡€ç±»å‹å®Œå–„ï¼Œéœ€è¡¥å……æŒ‡æ ‡æ•°æ®ç±»å‹ |

### 8.2 å…³é”®é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®

#### 8.2.1 é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»å®ç°ï¼‰

**é—®é¢˜ 1ï¼šä»»åŠ¡è¯¦æƒ…é¡µè™šæ‹Ÿæœºåˆ—è¡¨åŠŸèƒ½ä¸å®Œå–„**

å½“å‰çŠ¶æ€ï¼š
```typescript
// TaskDetail.vue - è™šæ‹Ÿæœºåˆ—è¡¨ Tab
<el-table :data="vmList" stripe>
  <el-table-column prop="name" label="è™šæ‹Ÿæœºåç§°" />
  <el-table-column prop="cpuCount" label="CPU" width="100" />
  <el-table-column prop="memoryMB" label="å†…å­˜" width="120" />
  <el-table-column prop="powerState" label="çŠ¶æ€" width="100" />
</el-table>
```

é—®é¢˜åˆ†æï¼š
- âŒ åªæœ‰ 4 ä¸ªåŸºç¡€å­—æ®µï¼Œç¼ºå°‘é…ç½®è¯¦æƒ…ï¼ˆç£ç›˜ã€ç½‘ç»œã€æ“ä½œç³»ç»Ÿç­‰ï¼‰
- âŒ æ²¡æœ‰å®ç°å¯å±•å¼€è¡ŒæŸ¥çœ‹æŒ‡æ ‡å›¾è¡¨
- âŒ vmList æ•°æ®æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œæœªä»åç«¯ API è·å–

ä¼˜åŒ–æ–¹æ¡ˆï¼š
```typescript
// 1. è¡¥å……å­—æ®µå’Œå±•å¼€è¡Œ
<el-table :data="vmList" stripe @expand-change="handleExpandVM">
  <el-table-column type="expand">
    <template #default="{ row }">
      <VMMetricsPanel :vm-id="row.id" :task-id="taskId" />
    </template>
  </el-table-column>
  <el-table-column prop="name" label="è™šæ‹Ÿæœºåç§°" min-width="180" />
  <el-table-column prop="os_type" label="æ“ä½œç³»ç»Ÿ" width="120" />
  <el-table-column prop="ip_address" label="IPåœ°å€" width="140" />
  <el-table-column prop="vcpu" label="CPU(æ ¸)" width="100" />
  <el-table-column prop="memory_mb" label="å†…å­˜(MB)" width="120" />
  <el-table-column prop="disk_gb" label="ç£ç›˜(GB)" width="120" />
  <el-table-column prop="power_state" label="çŠ¶æ€" width="100">
    <template #default="{ row }">
      <el-tag :type="getPowerStateType(row.power_state)">
        {{ getPowerStateText(row.power_state) }}
      </el-tag>
    </template>
  </el-table-column>
  <el-table-column label="æ“ä½œ" width="100" fixed="right">
    <template #default="{ row }">
      <el-button size="small" text @click="viewMetrics(row)">
        æŸ¥çœ‹æŒ‡æ ‡
      </el-button>
    </template>
  </el-table-column>
</el-table>

// 2. æ·»åŠ  API æ¥å£
export async function getTaskVMs(taskId: string): Promise<TaskVMInfo[]> {
  const app = await loadWailsApp()
  return await app.GetTaskVMs(taskId)
}

export async function getVMMetrics(
  vmId: string,
  startTime: number,
  endTime: number,
  metricTypes: string[]
): Promise<VMMetricsData> {
  const app = await loadWailsApp()
  return await app.GetVMMetrics(vmId, startTime, endTime, metricTypes)
}

// 3. åœ¨ TaskDetail.vue ä¸­åŠ è½½æ•°æ®
const vmList = ref<TaskVMInfo[]>([])

async function loadVMList() {
  try {
    loading.value = true
    vmList.value = await getTaskVMs(taskId)
  } catch (error) {
    ElMessage.error('åŠ è½½è™šæ‹Ÿæœºåˆ—è¡¨å¤±è´¥')
  } finally {
    loading.value = false
  }
}

onMounted(() => {
  if (task.value?.status === 'completed') {
    loadVMList()
  }
})
```

**é—®é¢˜ 2ï¼šç¼ºå°‘è™šæ‹ŸæœºæŒ‡æ ‡å›¾è¡¨å±•ç¤º**

éœ€è¦åˆ›å»ºçš„ç»„ä»¶ï¼š
```typescript
// components/VMMetricsPanel.vue
<template>
  <div class="vm-metrics-panel">
    <div class="metrics-header">
      <h4>{{ vmInfo.name }} - æ€§èƒ½æŒ‡æ ‡</h4>
      <el-date-picker
        v-model="timeRange"
        type="datetimerange"
        @change="loadMetrics"
      />
    </div>
    
    <el-row :gutter="16">
      <el-col :span="12">
        <MetricChart
          title="CPU ä½¿ç”¨ç‡ (%)"
          :data="cpuData"
          :loading="loading"
          color="#409EFF"
        />
      </el-col>
      <el-col :span="12">
        <MetricChart
          title="å†…å­˜ä½¿ç”¨ç‡ (%)"
          :data="memoryData"
          :loading="loading"
          color="#67C23A"
        />
      </el-col>
      <el-col :span="12">
        <MetricChart
          title="ç½‘ç»œåå (KB/s)"
          :data="networkData"
          :loading="loading"
          color="#E6A23C"
        />
      </el-col>
      <el-col :span="12">
        <MetricChart
          title="ç£ç›˜ IO (IOPS)"
          :data="diskData"
          :loading="loading"
          color="#F56C6C"
        />
      </el-col>
    </el-row>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import { ElMessage } from 'element-plus'
import { getVMMetrics } from '@/api/analysis'
import MetricChart from './MetricChart.vue'

interface Props {
  vmId: string
  taskId: string
}

const props = defineProps<Props>()

const loading = ref(false)
const timeRange = ref<[Date, Date]>()
const cpuData = ref([])
const memoryData = ref([])
const networkData = ref([])
const diskData = ref([])

async function loadMetrics() {
  if (!timeRange.value) return
  
  try {
    loading.value = true
    const [startTime, endTime] = timeRange.value
    
    const metrics = await getVMMetrics(
      props.vmId,
      startTime.getTime(),
      endTime.getTime(),
      ['cpu', 'memory', 'network', 'disk']
    )
    
    cpuData.value = metrics.metrics.cpu.datapoints
    memoryData.value = metrics.metrics.memory.datapoints
    networkData.value = metrics.metrics.network.datapoints
    diskData.value = metrics.metrics.disk.datapoints
  } catch (error) {
    ElMessage.error('åŠ è½½æŒ‡æ ‡æ•°æ®å¤±è´¥')
  } finally {
    loading.value = false
  }
}

onMounted(() => {
  // é»˜è®¤åŠ è½½æœ€è¿‘ 7 å¤©æ•°æ®
  const end = new Date()
  const start = new Date(end.getTime() - 7 * 24 * 60 * 60 * 1000)
  timeRange.value = [start, end]
  loadMetrics()
})
</script>
```

**é—®é¢˜ 3ï¼šç¼ºå°‘é€šç”¨ ECharts æŠ˜çº¿å›¾ç»„ä»¶**

éœ€è¦åˆ›å»ºï¼š
```typescript
// components/MetricChart.vue
<template>
  <div class="metric-chart-wrapper">
    <div class="chart-header">
      <h5>{{ title }}</h5>
      <el-tag v-if="latestValue !== null" size="small">
        å½“å‰: {{ formatValue(latestValue) }}
      </el-tag>
    </div>
    <div
      ref="chartRef"
      v-loading="loading"
      class="chart-container"
      :style="{ height: height }"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch, nextTick } from 'vue'
import * as echarts from 'echarts'
import type { ECharts } from 'echarts'

interface Props {
  title: string
  data: Array<{ timestamp: number; value: number }>
  loading?: boolean
  color?: string
  height?: string
  unit?: string
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  color: '#409EFF',
  height: '280px',
  unit: '%'
})

const chartRef = ref<HTMLDivElement>()
let chartInstance: ECharts | null = null

const latestValue = computed(() => {
  if (!props.data || props.data.length === 0) return null
  return props.data[props.data.length - 1].value
})

function formatValue(val: number): string {
  return `${val.toFixed(2)}${props.unit}`
}

function initChart() {
  if (!chartRef.value) return
  
  chartInstance = echarts.init(chartRef.value)
  updateChart()
}

function updateChart() {
  if (!chartInstance) return
  
  const option = {
    tooltip: {
      trigger: 'axis',
      formatter: (params: any) => {
        const point = params[0]
        const time = new Date(point.data[0]).toLocaleString()
        const value = point.data[1].toFixed(2)
        return `${time}<br/>${props.title}: ${value}${props.unit}`
      }
    },
    grid: {
      left: '3%',
      right: '4%',
      bottom: '3%',
      top: '10%',
      containLabel: true
    },
    xAxis: {
      type: 'time',
      boundaryGap: false,
      axisLabel: {
        formatter: (value: number) => {
          const date = new Date(value)
          return `${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${date.getMinutes()}`
        }
      }
    },
    yAxis: {
      type: 'value',
      axisLabel: {
        formatter: `{value}${props.unit}`
      }
    },
    series: [
      {
        type: 'line',
        smooth: true,
        symbol: 'none',
        sampling: 'lttb',
        itemStyle: {
          color: props.color
        },
        areaStyle: {
          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
            { offset: 0, color: `${props.color}40` },
            { offset: 1, color: `${props.color}10` }
          ])
        },
        data: props.data.map(item => [item.timestamp, item.value])
      }
    ],
    dataZoom: [
      {
        type: 'inside',
        start: 0,
        end: 100
      },
      {
        start: 0,
        end: 100
      }
    ]
  }
  
  chartInstance.setOption(option)
}

watch(
  () => props.data,
  () => {
    nextTick(() => {
      updateChart()
    })
  },
  { deep: true }
)

onMounted(() => {
  initChart()
  
  window.addEventListener('resize', () => {
    chartInstance?.resize()
  })
})

onUnmounted(() => {
  chartInstance?.dispose()
})
</script>

<style scoped lang="scss">
.metric-chart-wrapper {
  background: #fff;
  border-radius: 8px;
  padding: $spacing-md;
  border: 1px solid $border-color-light;
  
  .chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: $spacing-sm;
    
    h5 {
      margin: 0;
      font-size: 14px;
      color: $text-color-primary;
    }
  }
  
  .chart-container {
    width: 100%;
  }
}
</style>
```

#### 8.2.2 ä¸­ä¼˜å…ˆçº§ï¼ˆå»ºè®®å®ç°ï¼‰

**ä¼˜åŒ– 4ï¼šè¡¥å……ç¼ºå¤±çš„ç±»å‹å®šä¹‰**

åœ¨ `api/types.ts` ä¸­æ·»åŠ ï¼š
```typescript
// =============== è™šæ‹ŸæœºæŒ‡æ ‡æ•°æ®ç±»å‹ ===============

export interface VMMetricsData {
  vm_id: string
  vm_name: string
  metrics: {
    cpu: MetricTimeSeries
    memory: MetricTimeSeries
    network: MetricTimeSeries
    disk: MetricTimeSeries
  }
}

export interface MetricTimeSeries {
  metric_name: string
  unit: string  // '%', 'KB/s', 'IOPS'
  datapoints: MetricDataPoint[]
}

export interface MetricDataPoint {
  timestamp: number  // Unix timestamp in milliseconds
  value: number      // metric value (percentage or absolute)
}

// ä»»åŠ¡å…³è”çš„è™šæ‹Ÿæœºåˆ—è¡¨
export interface TaskVMInfo extends VMInfo {
  has_metrics: boolean
  metrics_count: number
  last_metric_time: string
}
```

**ä¼˜åŒ– 5ï¼šç»Ÿä¸€åŠ è½½å’Œé”™è¯¯çŠ¶æ€å¤„ç†**

åˆ›å»ºé€šç”¨ç»„ä»¶ï¼š
```typescript
// components/LoadingState.vue - éª¨æ¶å±åŠ è½½
// components/ErrorState.vue - é”™è¯¯çŠ¶æ€
// components/EmptyState.vue - ç©ºçŠ¶æ€
```

**ä¼˜åŒ– 6ï¼šç•Œé¢ç»†èŠ‚ä¼˜åŒ–**
- ç»Ÿä¸€å¡ç‰‡åœ†è§’ï¼š8px
- ç»Ÿä¸€é˜´å½±ï¼š`box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08)`
- ç»Ÿä¸€ä¸»é¢˜è‰²ï¼š`$primary-color: #409EFF`
- æ·»åŠ è¿‡æ¸¡åŠ¨ç”»ï¼š`transition: all 0.3s ease`

#### 8.2.3 ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰

**ä¼˜åŒ– 7ï¼šæ€§èƒ½ä¼˜åŒ–**
- è™šæ‹Ÿæ»šåŠ¨ï¼šå¤§é‡æ•°æ®ï¼ˆ>1000 è¡Œï¼‰ä½¿ç”¨ `el-virtual-table`
- å›¾è¡¨æ•°æ®é™é‡‡æ ·ï¼šä½¿ç”¨ ECharts çš„ `sampling: 'lttb'`
- è·¯ç”±æ‡’åŠ è½½ï¼šå·²å®ç° âœ…

**ä¼˜åŒ– 8ï¼šå¼€å‘ä½“éªŒä¼˜åŒ–**
- æ·»åŠ  ESLint å’Œ Prettier é…ç½®
- è¡¥å……å•å…ƒæµ‹è¯•ï¼ˆVitestï¼‰
- æ·»åŠ  Storybook ç»„ä»¶æ–‡æ¡£

### 8.3 å¾…åç«¯å®ç°çš„æ¥å£æ¸…å•

ä»¥ä¸‹æ¥å£éœ€è¦åç«¯ Go ä»£ç å®ç°ï¼š

| æ¥å£åç§° | æ–¹æ³• | è¯´æ˜ | ä¼˜å…ˆçº§ |
|---------|------|------|--------|
| GetTaskVMs | `GetTaskVMs(taskId string) []TaskVMInfo` | è·å–ä»»åŠ¡å…³è”çš„è™šæ‹Ÿæœºåˆ—è¡¨ | ğŸ”¥ é«˜ |
| GetVMMetrics | `GetVMMetrics(vmId, startTime, endTime, metrics) VMMetricsData` | è·å–è™šæ‹ŸæœºæŒ‡æ ‡æ—¶åºæ•°æ® | ğŸ”¥ é«˜ |
| GetVMDetail | `GetVMDetail(vmId string) VMDetailInfo` | è·å–è™šæ‹Ÿæœºè¯¦ç»†é…ç½®ä¿¡æ¯ | âš¡ ä¸­ |
| DetectZombieVMs | `DetectZombieVMs(connId, config) []ZombieResult` | åƒµå°¸ VM æ£€æµ‹ | âš¡ ä¸­ |
| AnalyzeRightSize | `AnalyzeRightSize(connId, config) []RightSizeResult` | Right Size åˆ†æ | âš¡ ä¸­ |
| DetectTidalPattern | `DetectTidalPattern(connId, config) []TidalResult` | æ½®æ±æ£€æµ‹ | âš¡ ä¸­ |
| AnalyzePlatformHealth | `AnalyzePlatformHealth(connId) HealthScoreResult` | å¹³å°å¥åº·åº¦åˆ†æ | âš¡ ä¸­ |

### 8.4 å®æ–½å»ºè®®ä¸æ—¶é—´è¡¨

**é˜¶æ®µ 1ï¸âƒ£ï¼ˆæœ¬å‘¨ï¼Œ3-5 å¤©ï¼‰ï¼šè™šæ‹Ÿæœºåˆ—è¡¨å’ŒæŒ‡æ ‡å›¾è¡¨**
- [ ] Day 1: åˆ›å»º `MetricChart.vue` é€šç”¨å›¾è¡¨ç»„ä»¶
- [ ] Day 2: åˆ›å»º `VMMetricsPanel.vue` æŒ‡æ ‡é¢æ¿ç»„ä»¶
- [ ] Day 3: ä¼˜åŒ– `TaskDetail.vue` è™šæ‹Ÿæœºåˆ—è¡¨ Tabï¼Œæ·»åŠ å±•å¼€è¡Œ
- [ ] Day 4: æ·»åŠ  API æ¥å£å°è£…å’Œç±»å‹å®šä¹‰
- [ ] Day 5: è”è°ƒæµ‹è¯•å’Œ Bug ä¿®å¤

**é˜¶æ®µ 2ï¸âƒ£ï¼ˆä¸‹å‘¨ï¼Œ5-7 å¤©ï¼‰ï¼šç­‰å¾…åç«¯æ•°æ®æ¥å£**
- [ ] åç«¯å®ç°è™šæ‹ŸæœºæŒ‡æ ‡æŸ¥è¯¢æ¥å£ï¼ˆä» metrics è¡¨æŸ¥è¯¢ï¼‰
- [ ] å‰åç«¯æ¥å£è”è°ƒ
- [ ] å®Œå–„é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–ï¼ˆæ•°æ®é‡è¾ƒå¤§æ—¶ï¼‰

**é˜¶æ®µ 3ï¸âƒ£ï¼ˆåç»­ï¼ŒæŒç»­ä¼˜åŒ–ï¼‰ï¼šç•Œé¢ç¾åŒ–å’Œä½“éªŒä¼˜åŒ–**
- [ ] æ·»åŠ éª¨æ¶å±åŠ è½½çŠ¶æ€
- [ ] ç»Ÿä¸€è§†è§‰é£æ ¼å’Œä¸»é¢˜è‰²
- [ ] ä¼˜åŒ–å“åº”å¼å¸ƒå±€
- [ ] æ·»åŠ å¿«æ·æ“ä½œå’Œæç¤º

### 8.5 åˆ†æç»“æœé¡µé¢çŠ¶æ€

ä»¥ä¸‹ 4 ä¸ªåˆ†æé¡µé¢çš„å‰ç«¯æ¡†æ¶å·²å®Œæˆï¼Œç­‰å¾…åç«¯æ•°æ®æ¥å£ï¼š

| é¡µé¢ | ç»„ä»¶è·¯å¾„ | å®Œæˆåº¦ | è¯´æ˜ |
|------|---------|--------|------|
| åƒµå°¸ VM æ£€æµ‹ | `views/analysis/Zombie.vue` | 95% âœ… | é…ç½®é¢æ¿ã€ç»“æœæ±‡æ€»ã€è¡¨æ ¼ã€å¯¼å‡ºåŠŸèƒ½å®Œæ•´ |
| Right Size | `views/analysis/RightSize.vue` | 95% âœ… | é…ç½®é¢æ¿ã€ç»Ÿè®¡å¡ç‰‡ã€ç»“æœåˆ—è¡¨å®Œæ•´ |
| æ½®æ±æ£€æµ‹ | `views/analysis/Tidal.vue` | 95% âœ… | é…ç½®é¢æ¿ã€æ¨¡å¼ç»Ÿè®¡ã€ç»“æœåˆ—è¡¨å®Œæ•´ |
| å¹³å°å¥åº·åº¦ | `views/analysis/Health.vue` | 95% âœ… | è¯„åˆ†åœ†ç¯å›¾ã€æŒ‡æ ‡å±•ç¤ºã€é£é™©é¡¹åˆ—è¡¨å®Œæ•´ |

**å‰åç«¯å¯¹æ¥å»ºè®®ï¼š**
1. å‰ç«¯ä½¿ç”¨ `async/await` è°ƒç”¨ Wails ç”Ÿæˆçš„ Go æ–¹æ³•
2. åç«¯è¿”å›æ•°æ®ç»“æ„éœ€ä¸ `api/types.ts` ä¸­å®šä¹‰çš„æ¥å£ä¸€è‡´
3. å»ºè®®ä½¿ç”¨ JSON Schema éªŒè¯æ•°æ®æ ¼å¼
4. é”™è¯¯ä¿¡æ¯æ ¼å¼ç»Ÿä¸€ï¼š`{ code: number, message: string, data: null }`

## 9. å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|----------|------|
| v1.1 | 2026-02-09 | è¡¥å……å½“å‰å®ç°çŠ¶æ€ä¸ä¼˜åŒ–å»ºè®®ç« èŠ‚ | - |
| v1.0 | 2026-02-07 | åˆå§‹ç‰ˆæœ¬ | - |

# JustFit 前端 UI 交互设计文档

## 0. 文档信息

| 项目 | 内容 |
|------|------|
| 文档名称 | 前端 UI 交互设计文档 |
| 版本 | v1.0 |
| 日期 | 2026-02-09 |
| 项目版本 | v0.0.1 Beta |
| 设计工具 | Element Plus + 自定义组件 |

---

## 1. 设计理念与原则

### 1.1 设计理念

**JustFit 的核心设计理念：高效、专业、数据驱动**

- **高效**：减少操作步骤，快速完成任务创建和分析
- **专业**：面向运维和资源管理专业人员，突出数据和结论
- **数据驱动**：以可视化图表和量化指标为核心，支持决策

### 1.2 设计原则

| 原则 | 说明 | 应用示例 |
|------|------|----------|
| **一致性** | 统一的视觉语言和交互模式 | 统一按钮样式、统一状态颜色、统一间距 |
| **反馈性** | 及时响应用户操作 | 加载状态、进度提示、操作结果通知 |
| **容错性** | 预防错误，提供恢复机制 | 删除确认、数据校验、错误提示 |
| **可访问性** | 清晰的层级和导航 | 面包屑导航、返回按钮、页面标题 |
| **专业性** | 准确的数据展示和术语 | 置信度、百分位、指标单位 |

---

## 2. 视觉设计规范

### 2.1 色彩系统

#### 主题色

| 色彩类型 | 色值 | 用途 | 示例 |
|---------|------|------|------|
| **主色** | `#409EFF` | 主要操作、强调元素 | 主按钮、链接、进度条 |
| **成功色** | `#67C23A` | 成功状态、正面反馈 | 完成标签、成功提示 |
| **警告色** | `#E6A23C` | 警告状态、需注意 | 暂停任务、中等风险 |
| **危险色** | `#F56C6C` | 错误状态、危险操作 | 失败提示、删除按钮 |
| **信息色** | `#909399` | 次要信息、中性状态 | 取消任务、未运行 |

#### 任务状态色

```scss
$status-colors: (
  'pending': #909399,    // 待处理 - 灰色
  'running': #409EFF,    // 运行中 - 蓝色
  'paused': #E6A23C,     // 已暂停 - 橙色
  'completed': #67C23A,  // 已完成 - 绿色
  'failed': #F56C6C,     // 失败 - 红色
  'cancelled': #909399   // 已取消 - 灰色
);
```

#### 分析类型色

```scss
$analysis-colors: (
  'zombie': #E6A23C,    // 僵尸VM - 橙色
  'rightsize': #409EFF, // Right Size - 蓝色
  'tidal': #67C23A,     // 潮汐检测 - 绿色
  'health': #F56C6C     // 平台健康 - 红色
);
```

#### 渐变色

```scss
// 卡片背景渐变
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

// 图表区域渐变
areaStyle: {
  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
    { offset: 0, color: 'rgba(64, 158, 255, 0.4)' },
    { offset: 1, color: 'rgba(64, 158, 255, 0.1)' }
  ])
}
```

### 2.2 字体系统

```scss
// 字体家族
$font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 
              Roboto, 'Helvetica Neue', Arial, 'Microsoft YaHei', sans-serif;

// 字体大小
$font-size-xs: 12px;    // 辅助文字、标签
$font-size-sm: 13px;    // 次要文字
$font-size-base: 14px;  // 正文
$font-size-md: 16px;    // 小标题
$font-size-lg: 18px;    // 标题
$font-size-xl: 20px;    // 页面主标题
$font-size-xxl: 24px;   // 大数字、统计值

// 字重
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
```

### 2.3 间距系统

```scss
$spacing-xs: 4px;   // 最小间距
$spacing-sm: 8px;   // 小间距
$spacing-md: 12px;  // 中间距
$spacing-lg: 16px;  // 大间距
$spacing-xl: 20px;  // 超大间距
$spacing-xxl: 24px; // 页面级间距
```

### 2.4 圆角与阴影

```scss
// 圆角
$border-radius-sm: 4px;   // 按钮、标签
$border-radius-base: 8px; // 卡片、输入框
$border-radius-lg: 12px;  // 大卡片、面板

// 阴影
$box-shadow-light: 0 1px 4px rgba(0, 0, 0, 0.05);    // 轻微阴影
$box-shadow-base: 0 2px 12px rgba(0, 0, 0, 0.08);    // 基础阴影
$box-shadow-hover: 0 4px 20px rgba(64, 158, 255, 0.15); // 悬停阴影
```

---

## 3. 页面布局设计

### 3.1 整体布局结构

```
┌─────────────────────────────────────────────────────┐
│  Header (64px)                                      │
│  ┌──────────┐  ┌─────────────────┐  ┌────────────┐ │
│  │   Logo   │  │   Page Title    │  │  Controls  │ │
│  └──────────┘  └─────────────────┘  └────────────┘ │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Main Content Area                                  │
│                                                     │
│  ┌───────────────────────────────────────────────┐ │
│  │                                               │ │
│  │  页面内容区域（动态路由）                        │
│  │  - 首页任务列表                                 │
│  │  - 任务详情                                     │
│  │  - 连接管理                                     │
│  │  - 分析结果                                     │
│  │                                               │ │
│  └───────────────────────────────────────────────┘ │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 3.2 响应式断点

| 断点 | 屏幕宽度 | 布局调整 |
|------|---------|---------|
| XS   | < 768px | 不支持（桌面应用为主） |
| SM   | 768-1024px | 2 列卡片布局 |
| MD   | 1024-1440px | 3 列卡片布局 |
| LG   | > 1440px | 4 列卡片布局 |

---

## 4. 核心页面交互设计

### 4.1 首页（Home.vue）

#### 4.1.1 页面结构

```
┌──────────────────────────────────────────────────────┐
│  Banner 轮播区 (180px)                                │
│  ┌────────────────────────────────────────────────┐  │
│  │ [核心功能] 僵尸VM检测                            │  │
│  │ 识别长期低负载的虚拟机，优化资源配置               │  │
│  │ [立即体验 →]                                     │  │
│  └────────────────────────────────────────────────┘  │
├──────────────────────────────────────────────────────┤
│  工具栏                                               │
│  ┌───────┐ ┌──────────────┐ ┌────────┐ ┌─────────┐ │
│  │任务管理│ │  [搜索框]    │ │[筛选器]│ │[新建任务]│ │
│  └───────┘ └──────────────┘ └────────┘ └─────────┘ │
├──────────────────────────────────────────────────────┤
│  任务卡片网格（Grid 布局，4 列）                       │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐   │
│  │ 任务卡片1│ │ 任务卡片2│ │ 任务卡片3│ │ 任务卡片4│   │
│  │         │ │         │ │         │ │         │   │
│  │ vCenter │ │  UIS    │ │ vCenter │ │  UIS    │   │
│  │ ●运行中  │ │ ✓已完成  │ │ ✕失败    │ │ ⏸暂停    │   │
│  │ 75%     │ │ 128 VMs │ │ 错误信息  │ │ 50%     │   │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘   │
│  ...更多卡片...                                       │
└──────────────────────────────────────────────────────┘
```

#### 4.1.2 任务卡片交互

**状态 1：运行中**
```
┌─────────────────────────────────────┐
│ [vCenter]              [⋮ 操作菜单]  │
├─────────────────────────────────────┤
│ 测试环境数据采集                      │
│ 🔗 vcenter-prod-01                   │
│ 🕐 2小时前                            │
├─────────────────────────────────────┤
│ ●正在采集 75%                         │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░                │
│ 正在采集 75/100 台虚拟机              │
└─────────────────────────────────────┘

悬停效果：
- 卡片轻微上浮（transform: translateY(-4px)）
- 阴影加深
- 显示快捷操作按钮
```

**状态 2：已完成**
```
┌─────────────────────────────────────┐
│ [vCenter]              [⋮ 操作菜单]  │
├─────────────────────────────────────┤
│ 生产环境资源评估                      │
│ 🔗 vcenter-prod-01                   │
│ 🕐 昨天 14:30                         │
├─────────────────────────────────────┤
│ ✓ 已完成                             │
│ ┌──────────┬──────────┐              │
│ │ 虚拟机   │ 分析项   │              │
│ │  128    │   4     │              │
│ └──────────┴──────────┘              │
└─────────────────────────────────────┘

点击行为：
- 点击卡片 → 跳转到任务详情页
- 点击操作菜单 → 显示「删除任务」
```

**状态 3：失败**
```
┌─────────────────────────────────────┐
│ [vCenter]              [⋮ 操作菜单]  │
├─────────────────────────────────────┤
│ 连接测试                             │
│ 🔗 vcenter-test-02                   │
│ 🕐 1小时前                            │
├─────────────────────────────────────┤
│ ✕ 连接超时                           │
│ [查看错误详情]                        │
└─────────────────────────────────────┘

操作菜单：
- 重试任务
- 编辑配置
- 删除任务
```

#### 4.1.3 新建任务交互流程

```
点击「新建任务」按钮
    ↓
进入 Wizard 向导页面（独立页面）
    ↓
步骤 1: 选择连接
  - 显示所有已连接的平台
  - 选择 1 个连接
  - [上一步(禁用)] [下一步]
    ↓
步骤 2: 选择虚拟机
  - 显示连接下的所有 VM（树形结构）
  - 支持按数据中心/集群筛选
  - 全选/反选
  - 已选择: 128 台
  - [上一步] [下一步]
    ↓
步骤 3: 配置采集参数
  - 时间范围：[最近7天 ▼]
  - 采样间隔：[1小时 ▼]
  - 指标类型：☑ CPU ☑ 内存 ☑ 磁盘 ☑ 网络
  - [上一步] [开始采集]
    ↓
创建任务，返回首页
任务卡片出现在列表顶部，状态为「运行中」
显示实时进度
```

### 4.2 任务详情页（TaskDetail.vue）

#### 4.2.1 页面结构

```
┌──────────────────────────────────────────────────────┐
│  任务头部                                              │
│  ← [返回]  测试环境数据采集  [✓已完成]  [导出] [⋮]    │
├──────────────────────────────────────────────────────┤
│  Tab 导航                                             │
│  [概览] [虚拟机列表] [僵尸VM] [Right Size] ...       │
├──────────────────────────────────────────────────────┤
│  Tab 内容区                                           │
│  ...根据 Tab 切换显示不同内容...                       │
└──────────────────────────────────────────────────────┘
```

#### 4.2.2 概览 Tab

```
┌──────────────────────────────────────────────────────┐
│  统计卡片（4列）                                       │
│  ┌────────────┐┌────────────┐┌────────────┐┌────────│
│  │📊 虚拟机   ││⏱ 采集耗时  ││✓ 已完成    ││📈 平台  │
│  │    128    ││   2小时15分 ││   分析 4   ││ vSphere││
│  └────────────┘└────────────┘└────────────┘└────────│
├──────────────────────────────────────────────────────┤
│  分析功能入口（4列卡片）                               │
│  ┌────────────┐┌────────────┐┌────────────┐┌────────│
│  │ 🟠 僵尸VM │││ 🔵 Right  │││ 🟢 潮汐   │││ 🔴 健康│
│  │    检测   │││   Size   │││   检测    │││   评分 │
│  │ ✓ 已完成  │││ ○ 未运行  │││ ✓ 已完成  │││ ○ 未运行│
│  │ [查看结果]│││ [开始分析]│││ [查看结果]│││ [开始] │
│  └────────────┘└────────────┘└────────────┘└────────│
└──────────────────────────────────────────────────────┘

交互：
1. 点击「查看结果」→ 切换到对应的分析 Tab
2. 点击「开始分析」→ 显示参数配置对话框，确认后开始分析
3. 分析完成后，卡片状态更新为「已完成」
```

#### 4.2.3 虚拟机列表 Tab

```
┌──────────────────────────────────────────────────────┐
│  工具栏                                               │
│  [搜索框: 搜索虚拟机]  [筛选: 全部▼] [导出列表]       │
├──────────────────────────────────────────────────────┤
│  数据表格（可展开行）                                  │
│  [>] VM名称        操作系统   IP地址    CPU  内存  状态│
│  ──────────────────────────────────────────────────  │
│  [-] web-server-01  CentOS7  10.1.1.10  4核  8GB  ●开机│
│      ┌──────────────────────────────────────────┐   │
│      │ 性能指标 (展开内容)                        │   │
│      │ 时间范围: [最近7天 ▼]                      │   │
│      │ ┌──────────────┐ ┌──────────────┐       │   │
│      │ │CPU 使用率(%) │ │内存使用率(%) │       │   │
│      │ │[折线图]       │ │[折线图]      │       │   │
│      │ └──────────────┘ └──────────────┘       │   │
│      │ ┌──────────────┐ ┌──────────────┐       │   │
│      │ │网络吞吐(KB/s)│ │磁盘IO(IOPS)  │       │   │
│      │ │[折线图]       │ │[折线图]      │       │   │
│      │ └──────────────┘ └──────────────┘       │   │
│      └──────────────────────────────────────────┘   │
│  [>] db-server-02   Ubuntu   10.1.1.11  8核 16GB ●开机│
│  [>] app-server-03  Windows  10.1.1.12  2核  4GB  ○关机│
│  ...更多虚拟机...                                      │
└──────────────────────────────────────────────────────┘

交互行为：
1. 点击行前的 [>] 或行本身 → 展开/收起详细指标
2. 展开时自动加载该虚拟机的性能指标数据
3. 时间范围可选：最近1天、3天、7天、30天、自定义
4. 图表支持缩放和数据点 tooltip
```

#### 4.2.4 分析结果 Tab（以僵尸VM为例）

```
┌──────────────────────────────────────────────────────┐
│  配置面板（可折叠）                                    │
│  ▼ 检测配置                         [开始检测] [导出] │
│  ┌────────────────────────────────────────────────┐ │
│  │ 选择连接: [vcenter-prod-01 ▼]  分析天数: [30▼]│ │
│  │ CPU阈值: [5%]  内存阈值: [10%]  置信度: 85%   │ │
│  └────────────────────────────────────────────────┘ │
├──────────────────────────────────────────────────────┤
│  结果汇总（4个统计卡片）                               │
│  ┌──────────┐┌──────────┐┌──────────┐┌──────────┐  │
│  │僵尸VM数量││浪费CPU   ││浪费内存  ││平均置信度│  │
│  │    12   ││  48 核   ││  96 GB  ││   92%   │  │
│  └──────────┘└──────────┘└──────────┘└──────────┘  │
├──────────────────────────────────────────────────────┤
│  结果详情表格                                          │
│  [>] VM名称    数据中心  CPU  内存  使用率  置信度 建议│
│  ──────────────────────────────────────────────────  │
│  [-] test-vm-01  DC1    4核  8GB   CPU:2% ●95%  关闭 │
│      ┌──────────────────────────────────────────┐   │
│      │ 检测证据:                                  │   │
│      │ • 30天内CPU平均使用率仅2.3%               │   │
│      │ • 30天内内存平均使用率仅5.1%              │   │
│      │ • 连续28天低于阈值                         │   │
│      │ • 无明显峰值和业务活动                     │   │
│      └──────────────────────────────────────────┘   │
│  [>] backup-vm-02 DC2    2核  4GB   CPU:1%  ●98% 关闭│
│  ...更多结果...                                        │
└──────────────────────────────────────────────────────┘

交互行为：
1. 点击「开始检测」→ 显示 loading，调用后端 API
2. 检测完成后，结果汇总和表格数据更新
3. 点击行前的 [>] → 展开查看详细证据
4. 置信度颜色：
   - ≥90%: 绿色（高置信度）
   - 70-90%: 橙色（中置信度）
   - <70%: 灰色（低置信度，不推荐操作）
5. 点击「导出」→ 导出 Excel 报告
```

### 4.3 连接管理页（Connections.vue）

#### 4.3.1 页面结构

```
┌──────────────────────────────────────────────────────┐
│  平台连接管理                        [+ 添加连接]     │
├──────────────────────────────────────────────────────┤
│  连接列表表格                                          │
│  名称          平台   主机地址      端口  状态  操作   │
│  ─────────────────────────────────────────────────   │
│  vcenter-prod  vCenter 10.1.1.100  443  ●已连接 [测试]│
│  uis-test      H3C UIS 10.2.1.50   8443 ○断开   [测试]│
│  vcenter-dev   vCenter 10.1.1.101  443  ●已连接 [测试]│
│  ...更多连接...                                        │
└──────────────────────────────────────────────────────┘

操作按钮：
- [测试连接]：测试当前配置是否可连接
- [编辑]：修改连接配置
- [删除]：删除连接（需要确认）
```

#### 4.3.2 添加连接对话框

```
┌─────────────────────────────────────────────┐
│  添加连接                            [×]     │
├─────────────────────────────────────────────┤
│  连接名称: [____________________________]   │
│  平台类型: [vCenter ▼]                      │
│  主机地址: [____________________________]   │
│  端  口:  [443_____]                        │
│  用户名:  [____________________________]   │
│  密  码:  [●●●●●●●●] 👁                     │
│  ☑ 跳过 TLS 证书验证（仅用于测试环境）       │
├─────────────────────────────────────────────┤
│                    [取消]  [测试连接] [保存] │
└─────────────────────────────────────────────┘

交互流程：
1. 填写表单
2. 点击「测试连接」→ 显示 loading，调用后端测试接口
   - 成功：✓ 连接成功！延迟: 25ms，版本: vSphere 7.0
   - 失败：✕ 连接失败：用户名或密码错误
3. 测试成功后，「保存」按钮可用
4. 点击「保存」→ 保存到数据库，关闭对话框，刷新列表
```

### 4.4 分析功能独立页面（Zombie/RightSize/Tidal/Health）

#### 4.4.1 通用结构（3段式布局）

```
┌──────────────────────────────────────────────────────┐
│  ① 配置面板（可折叠）                                  │
│  ▼ 检测配置                         [开始检测] [导出] │
│  ┌────────────────────────────────────────────────┐ │
│  │ [参数配置项]                                    │ │
│  └────────────────────────────────────────────────┘ │
├──────────────────────────────────────────────────────┤
│  ② 结果汇总（统计卡片）                               │
│  ┌──────────┐┌──────────┐┌──────────┐┌──────────┐  │
│  │ 统计指标1││ 统计指标2││ 统计指标3││ 统计指标4│  │
│  └──────────┘└──────────┘└──────────┘└──────────┘  │
├──────────────────────────────────────────────────────┤
│  ③ 结果详情（表格/图表）                              │
│  [详细数据展示]                                       │
└──────────────────────────────────────────────────────┘
```

---

## 5. 组件交互设计

### 5.1 通用表格组件

#### 功能特性

- ✅ 斑马纹样式
- ✅ 表头固定，内容区滚动
- ✅ 可展开行（查看详情）
- ✅ 排序功能
- ✅ 加载状态
- ✅ 空状态提示

#### 交互细节

```typescript
// 悬停效果
row:hover {
  background: rgba(64, 158, 255, 0.05);
  cursor: pointer;
}

// 展开行动画
.el-table__expand-icon {
  transition: transform 0.3s ease;
}

.el-table__expand-icon--expanded {
  transform: rotate(90deg);
}
```

### 5.2 图表组件（MetricChart.vue）

#### 交互功能

1. **Tooltip 悬停提示**
   ```
   悬停数据点 → 显示浮窗
   ┌────────────────────┐
   │ 2026-02-08 14:30   │
   │ CPU 使用率: 45.2%  │
   └────────────────────┘
   ```

2. **时间轴缩放**
   - 鼠标滚轮：缩放时间范围
   - 拖拽选择：框选时间段放大
   - 重置按钮：恢复默认视图

3. **数据点交互**
   - 点击数据点：高亮显示
   - 框选区域：查看统计信息（最大值、最小值、平均值）

4. **图例交互**
   - 点击图例：显示/隐藏对应数据系列
   - 便于对比多个指标

### 5.3 状态标签组件

#### 状态样式

```typescript
// 任务状态标签
<el-tag type="success">已完成</el-tag>    // 绿色
<el-tag type="primary">运行中</el-tag>    // 蓝色
<el-tag type="warning">已暂停</el-tag>    // 橙色
<el-tag type="danger">失败</el-tag>       // 红色
<el-tag type="info">已取消</el-tag>       // 灰色

// 风险等级标签
<el-tag type="success">低风险</el-tag>
<el-tag type="warning">中风险</el-tag>
<el-tag type="danger">高风险</el-tag>

// 置信度标签
<el-tag type="success">95%</el-tag>  // ≥90%: 绿色
<el-tag type="warning">85%</el-tag>  // 70-90%: 橙色
<el-tag type="info">65%</el-tag>     // <70%: 灰色
```

### 5.4 加载状态组件

#### 骨架屏（Skeleton）

```
任务卡片加载中：
┌─────────────────────────────────────┐
│ ▓▓▓▓▓▓            ░░░░              │
├─────────────────────────────────────┤
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓                      │
│ ▓▓▓▓▓▓▓▓                            │
│ ▓▓▓▓▓▓▓                             │
├─────────────────────────────────────┤
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓          │
└─────────────────────────────────────┘

表格加载中：
┌─────────────────────────────────────┐
│ ▓▓▓▓▓  ▓▓▓▓▓  ▓▓▓▓▓  ▓▓▓▓▓          │
│ ░░░░░  ░░░░░  ░░░░░  ░░░░░          │
│ ░░░░░  ░░░░░  ░░░░░  ░░░░░          │
│ ░░░░░  ░░░░░  ░░░░░  ░░░░░          │
└─────────────────────────────────────┘
```

#### Spinner 加载动画

```typescript
// 全屏加载
<el-loading fullscreen text="正在加载数据..." />

// 区域加载
<div v-loading="loading" element-loading-text="分析中...">
  <!-- 内容 -->
</div>
```

### 5.5 空状态组件

```
┌─────────────────────────────────────┐
│                                     │
│           [📭 图标]                 │
│                                     │
│         没有找到相关任务              │
│                                     │
│         [创建一个新任务]              │
│                                     │
└─────────────────────────────────────┘

// 不同场景的空状态
- 无任务：「没有找到相关任务，创建一个新任务开始吧！」
- 无虚拟机：「该连接下没有虚拟机数据」
- 无分析结果：「该分析尚未运行，点击「开始分析」」
- 搜索无结果：「没有找到符合条件的结果，试试其他关键词」
```

---

## 6. 动画与过渡效果

### 6.1 页面切换动画

```scss
// 路由切换淡入淡出
.fade-enter-active, .fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from, .fade-leave-to {
  opacity: 0;
}
```

### 6.2 卡片悬停效果

```scss
.task-card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }
}
```

### 6.3 展开折叠动画

```scss
.el-collapse-item {
  .el-collapse-item__header {
    transition: background-color 0.3s ease;
    
    &:hover {
      background-color: rgba(64, 158, 255, 0.05);
    }
  }
}
```

### 6.4 进度条动画

```scss
.task-progress {
  .el-progress-bar__inner {
    transition: width 0.6s ease;
  }
}
```

---

## 7. 错误与异常处理

### 7.1 表单验证

```typescript
// 实时验证
<el-form-item label="主机地址" prop="host">
  <el-input v-model="form.host" placeholder="例如: 192.168.1.100" />
</el-form-item>

rules: {
  host: [
    { required: true, message: '请输入主机地址', trigger: 'blur' },
    { 
      pattern: /^(\d{1,3}\.){3}\d{1,3}$|^[a-zA-Z0-9\-\.]+$/, 
      message: '请输入有效的 IP 地址或域名', 
      trigger: 'blur' 
    }
  ]
}
```

### 7.2 错误提示

```typescript
// 操作失败提示（Toast）
ElMessage.error({
  message: '连接失败：用户名或密码错误',
  duration: 3000,
  showClose: true
})

// 页面级错误（Result 页面）
<el-result
  icon="error"
  title="加载失败"
  sub-title="无法获取虚拟机数据，请检查网络连接或稍后重试"
>
  <template #extra>
    <el-button type="primary" @click="retry">重试</el-button>
  </template>
</el-result>
```

### 7.3 确认对话框

```typescript
// 删除确认
ElMessageBox.confirm(
  '确定要删除此任务吗？删除后无法恢复。',
  '确认删除',
  {
    confirmButtonText: '删除',
    cancelButtonText: '取消',
    type: 'warning',
    confirmButtonClass: 'el-button--danger'
  }
)
.then(() => {
  // 执行删除
  ElMessage.success('任务已删除')
})
.catch(() => {
  // 用户取消
})
```

---

## 8. 响应式设计

### 8.1 断点适配

```scss
// 桌面优先（Desktop First）
@media (max-width: 1440px) {
  .task-grid {
    grid-template-columns: repeat(3, 1fr);  // 3列
  }
}

@media (max-width: 1024px) {
  .task-grid {
    grid-template-columns: repeat(2, 1fr);  // 2列
  }
  
  .app-header {
    padding: 0 $spacing-md;  // 减小内边距
  }
}

@media (max-width: 768px) {
  .task-grid {
    grid-template-columns: 1fr;  // 单列
  }
  
  .stats-row {
    .el-col {
      margin-bottom: $spacing-md;  // 卡片纵向排列
    }
  }
}
```

### 8.2 移动端优化（未来考虑）

**当前版本（v0.0.1）不支持移动端**，仅支持桌面应用（1024px+）

未来移动端优化方向：
- 触摸友好的按钮和卡片尺寸
- 简化的导航（底部 Tab Bar）
- 滑动手势（左滑删除、下拉刷新）
- 响应式表格（卡片式展示）

---

## 9. 可访问性设计（Accessibility）

### 9.1 键盘导航

```typescript
// Tab 键导航顺序
tabindex="0"  // 可聚焦元素

// 快捷键
- Ctrl + N: 新建任务
- Ctrl + F: 搜索
- Esc: 关闭对话框

// 焦点样式
:focus-visible {
  outline: 2px solid $primary-color;
  outline-offset: 2px;
}
```

### 9.2 语义化 HTML

```html
<!-- 使用语义化标签 -->
<nav>...</nav>      <!-- 导航 -->
<main>...</main>    <!-- 主内容 -->
<header>...</header><!-- 头部 -->
<article>...</article><!-- 独立内容 -->

<!-- ARIA 属性 -->
<button aria-label="关闭对话框">×</button>
<div role="alert">连接失败</div>
<input aria-required="true" />
```

### 9.3 颜色对比度

```scss
// WCAG 2.1 AA 级标准（对比度 ≥ 4.5:1）

// 正常文字
$text-color-primary: #303133;   // 对比度 14.8:1 ✅
$text-color-regular: #606266;   // 对比度 8.1:1 ✅
$text-color-secondary: #909399; // 对比度 4.6:1 ✅

// 按钮
$primary-color: #409EFF;        // 白字对比度 4.5:1 ✅
```

---

## 10. 国际化考虑（i18n）

### 10.1 当前实现

**v0.0.1 仅支持中文**，所有文本硬编码

### 10.2 未来国际化方案

```typescript
// 使用 vue-i18n
import { createI18n } from 'vue-i18n'

const i18n = createI18n({
  locale: 'zh-CN',
  fallbackLocale: 'en-US',
  messages: {
    'zh-CN': zhCN,
    'en-US': enUS
  }
})

// 组件中使用
<template>
  <h1>{{ $t('page.home.title') }}</h1>
</template>

// zh-CN.json
{
  "page": {
    "home": {
      "title": "首页"
    }
  }
}

// en-US.json
{
  "page": {
    "home": {
      "title": "Home"
    }
  }
}
```

---

## 11. 交互流程图示例

### 11.1 创建任务完整流程

```
用户操作                    系统反馈
───────────                ───────────
点击「新建任务」
    │                       → 进入 Wizard 页面
    ↓
步骤1: 选择连接
    │                       → 加载连接列表
    │                       → 显示连接状态（已连接/断开）
选择 vcenter-prod
    │                       → 高亮选中项
    │                       → 「下一步」按钮可用
点击「下一步」
    ↓
步骤2: 选择虚拟机
    │                       → 加载 VM 树形列表
    │                       → 显示数据中心/集群/主机/VM 层级
全选 DC1 下的所有 VM
    │                       → 树节点勾选
    │                       → 底部显示「已选择 128 台」
点击「下一步」
    ↓
步骤3: 配置参数
    │                       → 显示默认参数
选择时间范围: 最近7天
选择指标: CPU, 内存, 磁盘, 网络
    │                       → 参数校验通过
点击「开始采集」
    │                       → 创建任务记录
    │                       → 调用后端采集接口
    │                       → 返回首页
    ↓
首页显示新任务
    │                       → 任务卡片出现在顶部
    │                       → 状态: 运行中，进度: 0%
    │                       → 开始实时更新进度
    ↓
后台采集数据
    │                       → 每2秒轮询任务状态
    │                       → 进度更新: 10% → 25% → 50% → ...
    │                       → 状态文本更新: 「正在采集 32/128 台」
    ↓
采集完成
    │                       → 状态变更为「已完成」
    │                       → 显示统计信息（虚拟机数量、采集耗时）
    │                       → 通知: 「任务执行成功！」
    ↓
点击任务卡片
    │                       → 跳转到任务详情页
    │                       → 显示概览 Tab
    │                       → 可开始分析
```

### 11.2 虚拟机指标查看流程

```
任务详情页 → 虚拟机列表 Tab
    ↓
点击虚拟机行
    │                       → 行展开动画
    │                       → 显示加载状态（骨架屏）
    ↓
后台加载指标数据
    │                       → 调用 GetVMMetrics API
    │                       → 获取 7 天 CPU/内存/网络/磁盘数据
    ↓
渲染 4 个图表
    │                       → 异步渲染 ECharts 图表
    │                       → 显示折线图和数据点
    ↓
用户交互
    │
    ├─ 悬停数据点          → 显示 Tooltip（时间 + 数值）
    ├─ 滚轮缩放            → 缩放时间轴
    ├─ 框选区域            → 放大选中时间段
    ├─ 切换时间范围        → 重新加载数据
    └─ 点击图例            → 显示/隐藏数据系列
```

---

## 12. 性能优化策略

### 12.1 前端性能

| 优化项 | 实现方式 | 效果 |
|--------|---------|------|
| 路由懒加载 | `() => import('./views/Home.vue')` | 减少首屏加载大小 |
| 图片懒加载 | `v-lazy` 指令 | 减少初始网络请求 |
| 虚拟滚动 | `el-virtual-table`（大数据量） | 渲染性能提升 10x |
| 图表降采样 | ECharts `sampling: 'lttb'` | 大数据集渲染更流畅 |
| 防抖节流 | `useDebounceFn`（搜索框） | 减少不必要的 API 调用 |

### 12.2 数据加载优化

```typescript
// 分页加载
const pageSize = 50
const currentPage = ref(1)

// 懒加载（滚动到底部加载更多）
const handleScroll = useDebounceFn(() => {
  if (scrollBottom && !loading.value) {
    loadMore()
  }
}, 300)

// 缓存策略（Pinia 持久化）
import { useStorage } from '@vueuse/core'

const cachedData = useStorage('task-list', [])
```

### 12.3 渲染优化

```vue
<!-- 使用 v-show 而非 v-if（频繁切换） -->
<div v-show="activeTab === 'overview'">...</div>

<!-- 使用 key 优化列表渲染 -->
<div v-for="task in tasks" :key="task.id">...</div>

<!-- 避免不必要的响应式 -->
<script setup lang="ts">
import { shallowRef } from 'vue'  // 非深层响应式
const chartData = shallowRef([])
</script>
```

---

## 13. 开发调试工具

### 13.1 Vue DevTools

- 查看组件树
- 检查 Pinia 状态
- 查看路由信息
- 性能分析

### 13.2 浏览器 DevTools

```typescript
// 性能分析
console.time('loadVMList')
await loadVMList()
console.timeEnd('loadVMList')

// 网络请求监控
console.log('API Response:', response)

// 内存占用分析
Performance Monitor → Memory
```

---

## 14. 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| v1.0 | 2026-02-09 | 初始版本，完整的 UI 交互设计文档 | - |

---

## 附录：设计检查清单

### A. 交互设计自查

- [ ] 每个操作是否有明确的反馈？
- [ ] 加载状态是否友好（骨架屏/Spinner）？
- [ ] 错误提示是否清晰可理解？
- [ ] 空状态是否有引导操作？
- [ ] 危险操作是否有二次确认？
- [ ] 长时间操作是否可取消？
- [ ] 表单验证是否实时反馈？

### B. 视觉设计自查

- [ ] 色彩使用是否一致？
- [ ] 字体大小是否符合层级？
- [ ] 间距是否统一？
- [ ] 圆角和阴影是否规范？
- [ ] 图标风格是否一致？

### C. 性能检查

- [ ] 大数据量是否有分页/虚拟滚动？
- [ ] 图表数据是否降采样？
- [ ] 图片是否懒加载？
- [ ] 路由是否懒加载？
- [ ] 是否有不必要的重复渲染？

### D. 可访问性检查

- [ ] 颜色对比度是否足够？
- [ ] 是否支持键盘导航？
- [ ] ARIA 属性是否完整？
- [ ] 焦点状态是否清晰？

---

**文档完成！** 🎉

本文档详细描述了 JustFit 前端的 UI 设计规范和交互流程，为开发人员提供了完整的实现指南。

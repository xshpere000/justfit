# JustFit 测试用例文档

## 0. 文档信息

| 项目 | 内容 |
|------|------|
| 文档名称 | 测试用例文档 |
| 版本 | v1.0 |
| 日期 | 2026-02-07 |
| 项目版本 | v0.0.1 Beta |

## 1. 用例组织

### 1.1 用例编号规则

```
TC-[模块]-[序号]
- 模块: CON(连接), COL(采集), ANA(分析), RPT(报告), SYS(系统)
- 序号: 4 位数字，从 0001 开始
```

### 1.2 优先级定义

| 优先级 | 说明 |
|--------|------|
| P0 | 核心功能，必须测试 |
| P1 | 重要功能，首期必须覆盖 |
| P2 | 一般功能 |
| P3 | 边界场景 |

## 2. 连接管理用例

### TC-CON-0001: 创建 vCenter 连接

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-CON-0001 |
| 用例标题 | 创建 vCenter 连接 |
| 优先级 | P0 |
| 前置条件 | 应用已启动，进入连接管理页面 |
| 测试步骤 | 1. 点击"新增连接"按钮<br>2. 选择平台类型为"VMware vCenter"<br>3. 输入连接名称<br>4. 输入 vCenter 地址<br>5. 输入用户名和密码<br>6. 点击"测试连接"<br>7. 测试成功后点击"保存" |
| 预期结果 | 1. 连接表单正常显示<br>2. 测试连接显示成功<br>3. 连接保存到列表，状态为"未连接" |
| 测试数据 | 地址: https://vcenter.test.local<br>用户名: administrator@vsphere.local<br>密码: *** |

### TC-CON-0002: 测试连接失败

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-CON-0002 |
| 用例标题 | 测试连接失败处理 |
| 优先级 | P0 |
| 前置条件 | 在新增连接表单 |
| 测试步骤 | 1. 输入无效的 vCenter 地址<br>2. 点击"测试连接" |
| 预期结果 | 显示"连接失败"错误提示，包含失败原因 |
| 测试数据 | 地址: https://invalid-host.local |

### TC-CON-0003: 编辑连接配置

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-CON-0003 |
| 用例标题 | 编辑连接配置 |
| 优先级 | P1 |
| 前置条件 | 已有至少一个连接 |
| 测试步骤 | 1. 点击连接的"编辑"按钮<br>2. 修改连接名称<br>3. 点击"保存" |
| 预期结果 | 连接信息更新成功，列表显示新名称 |

### TC-CON-0004: 删除连接

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-CON-0004 |
| 用例标题 | 删除连接 |
| 优先级 | P1 |
| 前置条件 | 已有至少一个连接 |
| 测试步骤 | 1. 点击连接的"删除"按钮<br>2. 确认删除 |
| 预期结果 | 连接从列表移除，数据库记录删除 |

## 3. 数据采集用例

### TC-COL-0001: 创建采集任务

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-COL-0001 |
| 用例标题 | 创建采集任务 |
| 优先级 | P0 |
| 前置条件 | 已有可用的 vCenter 连接 |
| 测试步骤 | 1. 选择连接<br>2. 配置采集范围（选择集群）<br>3. 配置时间窗口（最近 7 天）<br>4. 配置采样粒度（5 分钟）<br>5. 点击"开始采集" |
| 预期结果 | 1. 采集任务创建成功<br>2. 任务状态显示"运行中"<br>3. 任务进度实时更新 |
| 测试数据 | 时间范围: 最近 7 天<br>采样粒度: 5 分钟 |

### TC-COL-0002: 采集任务完成

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-COL-0002 |
| 用例标题 | 采集任务完成验证 |
| 优先级 | P0 |
| 前置条件 | 采集任务运行中 |
| 测试步骤 | 1. 等待任务完成<br>2. 查看任务详情<br>3. 检查数据库数据 |
| 预期结果 | 1. 任务状态变为"成功"<br>2. 数据库包含采集的数据<br>3. clusters, hosts, vms 表有记录 |

### TC-COL-0003: 采集任务失败重试

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-COL-0003 |
| 用例标题 | 采集失败后重试 |
| 优先级 | P1 |
| 前置条件 | 有失败的采集任务 |
| 测试步骤 | 1. 查看失败任务详情<br>2. 点击"重试"按钮 |
| 预期结果 | 1. 任务重新执行<br>2. 状态更新为"运行中" |

### TC-COL-0004: 停止运行中任务

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-COL-0004 |
| 用例标题 | 停止运行中的采集任务 |
| 优先级 | P1 |
| 前置条件 | 有运行中的采集任务 |
| 测试步骤 | 1. 点击任务的"停止"按钮<br>2. 确认停止 |
| 预期结果 | 1. 任务状态变为"已停止"<br>2. 数据库保存部分已采集数据 |

### TC-COL-0005: 大规模数据采集

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-COL-0005 |
| 用例标题 | 大规模数据采集性能验证 |
| 优先级 | P2 |
| 前置条件 | 连接到包含 100+ VM 的环境 |
| 测试步骤 | 1. 创建采集任务，范围全部<br>2. 启动采集<br>3. 监控任务进度和性能 |
| 预期结果 | 1. 采集在 30 分钟内完成<br>2. 应用不卡顿<br>3. 数据完整入库 |

## 4. 分析算法用例

### TC-ANA-0001: 僵尸 VM 检测

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-ANA-0001 |
| 用例标题 | 僵尸 VM 检测 |
| 优先级 | P0 |
| 前置条件 | 已采集 14 天以上的指标数据 |
| 测试步骤 | 1. 进入"僵尸 VM"页面<br>2. 点击"运行分析"<br>3. 查看分析结果 |
| 预期结果 | 1. 分析任务完成<br>2. 显示僵尸 VM 列表<br>3. 每条记录包含置信度和建议 |
| 测试数据 | 准备低负载 VM 数据 (CPU < 5%, Mem < 10%) |

### TC-ANA-0002: 僵尸 VM 详情查看

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-ANA-0002 |
| 用例标题 | 查看僵尸 VM 详情 |
| 优先级 | P1 |
| 前置条件 | 僵尸 VM 分析完成 |
| 测试步骤 | 1. 点击某个僵尸 VM<br>2. 查看详情抽屉 |
| 预期结果 | 1. 显示 CPU/内存/IO 趋势图<br>2. 显示统计数据（均值、P95、峰值）<br>3. 显示判定依据和建议 |

### TC-ANA-0003: Right Size 分析

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-ANA-0003 |
| 用例标题 | Right Size 配置评估 |
| 优先级 | P0 |
| 前置条件 | 已采集 30 天以上的指标数据 |
| 测试步骤 | 1. 进入"Right Size"页面<br>2. 点击"运行分析"<br>3. 查看分析结果 |
| 预期结果 | 1. 显示需要调整的 VM 列表<br>2. 包含当前配置和建议配置<br>3. 显示节省估算 |
| 测试数据 | 准备低使用率 VM (P95 < 50%) 和高使用率 VM (P95 > 80%) |

### TC-ANA-0004: 潮汐检测

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-ANA-0004 |
| 用例标题 | 潮汐性负载检测 |
| 优先级 | P1 |
| 前置条件 | 已采集 14 天以上的指标数据 |
| 测试步骤 | 1. 进入"潮汐检测"页面<br>2. 点击"运行分析"<br>3. 查看分析结果 |
| 预期结果 | 1. 显示具有潮汐特征的 VM<br>2. 显示周期类型（日/周）<br>3. 显示启停建议 |
| 测试数据 | 准备日周期数据（工作时间高负载） |

### TC-ANA-0005: 平台健康评分

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-ANA-0005 |
| 用例标题 | 平台健康评分 |
| 优先级 | P1 |
| 前置条件 | 已采集集群和主机数据 |
| 测试步骤 | 1. 进入"平台健康"页面<br>2. 点击"运行分析"<br>3. 查看分析结果 |
| 预期结果 | 1. 显示集群健康评分<br>2. 显示主机健康评分<br>3. 显示风险项和建议 |

### TC-ANA-0006: 分析算法阈值配置

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-ANA-0006 |
| 用例标题 | 配置分析阈值 |
| 优先级 | P2 |
| 前置条件 | 进入分析页面 |
| 测试步骤 | 1. 点击"规则配置"<br>2. 修改阈值参数<br>3. 保存并重新运行分析 |
| 预期结果 | 分析结果使用新阈值计算 |

## 5. 报告导出用例

### TC-RPT-0001: 生成综合报告

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-RPT-0001 |
| 用例标题 | 生成综合分析报告 |
| 优先级 | P0 |
| 前置条件 | 各类分析已完成 |
| 测试步骤 | 1. 进入"报告"页面<br>2. 点击"生成报告"<br>3. 选择报告类型"综合报告"<br>4. 选择时间范围<br>5. 点击"生成" |
| 预期结果 | 1. 报告生成成功<br>2. 包含执行摘要<br>3. 包含各类分析结果摘要<br>4. 包含图表 |

### TC-RPT-0002: 导出 PDF 报告

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-RPT-0002 |
| 用例标题 | 导出 PDF 格式报告 |
| 优先级 | P1 |
| 前置条件 | 已生成报告 |
| 测试步骤 | 1. 选择一个报告<br>2. 点击"导出"<br>3. 选择格式"PDF"<br>4. 选择保存位置<br>5. 确认导出 |
| 预期结果 | 1. PDF 文件生成<br>2. 打开 PDF 内容正确<br>3. 图表显示正常 |

### TC-RPT-0003: 导出 HTML 报告

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-RPT-0003 |
| 用例标题 | 导出 HTML 格式报告 |
| 优先级 | P1 |
| 前置条件 | 已生成报告 |
| 测试步骤 | 1. 选择一个报告<br>2. 点击"导出"<br>3. 选择格式"HTML"<br>4. 确认导出 |
| 预期结果 | 1. HTML 文件生成<br>2. 浏览器打开样式正常<br>3. 图表交互正常 |

### TC-RPT-0004: 导出 JSON 报告

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-RPT-0004 |
| 用例标题 | 导出 JSON 格式报告 |
| 优先级 | P2 |
| 前置条件 | 已生成报告 |
| 测试步骤 | 1. 选择一个报告<br>2. 点击"导出"<br>3. 选择格式"JSON"<br>4. 确认导出 |
| 预期结果 | 1. JSON 文件生成<br>2. JSON 格式正确<br>3. 数据完整 |

## 6. 系统设置用例

### TC-SYS-0001: 配置数据保留策略

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-SYS-0001 |
| 用例标题 | 配置数据保留天数 |
| 优先级 | P1 |
| 前置条件 | 进入系统设置页面 |
| 测试步骤 | 1. 找到"数据保留策略"配置<br>2. 修改保留天数为 30<br>3. 保存配置 |
| 预期结果 | 1. 配置保存成功<br>2. 超过 30 天的数据被清理 |

### TC-SYS-0002: 配置默认采集参数

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-SYS-0002 |
| 用例标题 | 配置默认采集参数 |
| 优先级 | P2 |
| 前置条件 | 进入系统设置页面 |
| 测试步骤 | 1. 修改默认采样间隔为 10 分钟<br>2. 保存配置<br>3. 创建新的采集任务 |
| 预期结果 | 新任务的默认采样间隔为 10 分钟 |

### TC-SYS-0003: 导出诊断包

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-SYS-0003 |
| 用例标题 | 导出诊断日志包 |
| 优先级 | P1 |
| 前置条件 | 进入系统设置页面 |
| 测试步骤 | 1. 点击"导出诊断包"<br>2. 选择包含内容<br>3. 确认导出 |
| 预期结果 | 1. 生成压缩包<br>2. 包含日志文件<br>3. 包含配置信息 |

### TC-SYS-0004: 检查更新

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-SYS-0004 |
| 用例标题 | 检查应用更新 |
| 优先级 | P2 |
| 前置条件 | 进入系统设置页面 |
| 测试步骤 | 1. 点击"检查更新"按钮 |
| 预期结果 | 1. 显示当前版本<br>2. 有新版本时显示提示<br>3. 点击可跳转到发布页 |

## 7. UI/UX 用例

### TC-UIX-0001: 页面导航

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-UIX-0001 |
| 用例标题 | 页面间导航切换 |
| 优先级 | P0 |
| 前置条件 | 应用已启动 |
| 测试步骤 | 1. 点击侧边栏各菜单项<br>2. 观察页面切换 |
| 预期结果 | 1. 页面切换流畅<br>2. 当前菜单高亮<br>3. 面包屑更新 |

### TC-UIX-0002: 表格排序和筛选

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-UIX-0002 |
| 用例标题 | 表格排序和筛选功能 |
| 优先级 | P1 |
| 前置条件 | 进入有表格数据的页面 |
| 测试步骤 | 1. 点击表头排序<br>2. 使用筛选条件<br>3. 使用分页 |
| 预期结果 | 1. 排序正常工作<br>2. 筛选结果正确<br>3. 分页跳转正常 |

### TC-UIX-0003: 空状态和错误状态

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-UIX-0003 |
| 用例标题 | 空状态和错误状态显示 |
| 优先级 | P1 |
| 前置条件 | 应用已启动 |
| 测试步骤 | 1. 查看无数据的页面<br>2. 触发错误操作 |
| 预期结果 | 1. 空状态有友好提示<br>2. 错误状态有明确说明 |

### TC-UIX-0004: 深色模式

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-UIX-0004 |
| 用例标题 | 深色模式切换（如有） |
| 优先级 | P3 |
| 前置条件 | 应用已启动 |
| 测试步骤 | 1. 切换深色模式<br>2. 检查各页面显示 |
| 预期结果 | 1. 模式切换成功<br>2. 各页面样式适配正确 |

## 8. 性能用例

### TC-PER-0001: 应用启动性能

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-PER-0001 |
| 用例标题 | 应用启动时间 |
| 优先级 | P1 |
| 测试步骤 | 1. 关闭应用<br>2. 重新启动应用<br>3. 记录启动时间 |
| 预期结果 | 冷启动时间 < 3 秒 |

### TC-PER-0002: 大数据列表渲染

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-PER-0002 |
| 用例标题 | 大数据列表渲染性能 |
| 优先级 | P1 |
| 前置条件 | 数据库有 1000+ VM 记录 |
| 测试步骤 | 1. 进入 VM 列表页面<br>2. 记录加载时间<br>3. 滚动列表 |
| 预期结果 | 1. 初始加载 < 1 秒<br>2. 滚动流畅无卡顿 |

### TC-PER-0003: 图表渲染性能

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-PER-0003 |
| 用例标题 | 大数据图表渲染 |
| 优先级 | P2 |
| 前置条件 | 有包含 10000+ 数据点的指标 |
| 测试步骤 | 1. 打开指标详情页<br>2. 记录图表渲染时间 |
| 预期结果 | 图表渲染 < 2 秒 |

## 9. 安全用例

### TC-SEC-0001: 凭据加密验证

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-SEC-0001 |
| 用例标题 | 凭据加密存储验证 |
| 优先级 | P0 |
| 测试步骤 | 1. 创建连接并保存密码<br>2. 打开数据库文件<br>3. 查询 credentials 表 |
| 预期结果 | 密码字段为加密数据，无法直接读取明文 |

### TC-SEC-0002: 日志脱敏验证

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-SEC-0002 |
| 用例标题 | 日志脱敏验证 |
| 优先级 | P0 |
| 测试步骤 | 1. 执行涉及密码的操作<br>2. 打开日志文件<br>3. 搜索密码字符串 |
| 预期结果 | 日志中不包含密码明文 |

### TC-SEC-0003: SQL 注入防护

| 项目 | 内容 |
|------|------|
| 用例编号 | TC-SEC-0003 |
| 用例标题 | SQL 注入防护测试 |
| 优先级 | P1 |
| 测试步骤 | 1. 在搜索框输入 "'; DROP TABLE vms; --"<br>2. 执行搜索 |
| 预期结果 | 输入被正确转义，不产生错误 |

## 10. 用例统计

| 模块 | P0 | P1 | P2 | P3 | 合计 |
|------|----|----|----|----|-----|
| 连接管理 | 2 | 2 | 0 | 0 | 4 |
| 数据采集 | 2 | 2 | 1 | 0 | 5 |
| 分析算法 | 3 | 2 | 1 | 0 | 6 |
| 报告导出 | 1 | 3 | 0 | 0 | 4 |
| 系统设置 | 0 | 2 | 1 | 1 | 4 |
| UI/UX | 1 | 2 | 1 | 0 | 4 |
| 性能 | 0 | 2 | 1 | 0 | 3 |
| 安全 | 2 | 1 | 0 | 0 | 3 |
| **合计** | **13** | **16** | **6** | **1** | **36** |

## 11. 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| v1.0 | 2026-02-07 | 初始版本 | - |
